{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\annavarapu.7\\\\Transport-frontend\\\\src\\\\Pages\\\\Schedules\\\\SPOC-Schedules-admin.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport Popup from '../../Components/Model';\nimport Button from '../../Components/Button';\nimport Toast from '../../Components/Toast';\nimport WeekRangePicker from '../../Components/WeekRangePicker';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport ApiComponent from '../../Components/API';\nimport ScheduleTemplateDownloader from './ScheduleTemplateDownload';\nimport { MdEdit, MdOutlineDeleteOutline } from 'react-icons/md';\nimport Cookies from 'js-cookie';\nimport { jwtDecode } from 'jwt-decode';\nimport Loader from '../../Components/Loader';\nimport { useNavigate } from 'react-router-dom';\nimport * as XLSX from 'xlsx';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SPOCSchedules = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    warn,\n    info,\n    error,\n    success\n  } = Toast();\n  const [isPopupOpen, setIsPopupOpen] = useState(false);\n  const [apiProps, setApiProps] = useState(null);\n  const [spocschedules, setSpocschedules] = useState([]);\n  const [pickupTimings, setPickupTimings] = useState([]);\n  const [dropTimings, setDropTimings] = useState([]);\n  const [selectedWeek, setSelectedWeek] = useState('');\n  const [filter, setFilter] = useState('');\n  const [userDetails, setUserDetails] = useState({});\n  const [weekDays, setWeekDays] = useState([]);\n  const [editingPickup, setEditingPickup] = useState(null);\n  const [editingDrop, setEditingDrop] = useState(null);\n  const [visibleItems, setVisibleItems] = useState([]);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [hasMore, setHasMore] = useState(true);\n  const [file, setFile] = useState(null);\n  const handleFileChange = event => {\n    const file = event.target.files[0];\n    if (file) {\n      setFile(file);\n    }\n  };\n  const handleUpload = async () => {\n    if (!file) {\n      error('Please select a file');\n      return;\n    }\n    // Check if the file is Excel or CSV\n    const validFileTypes = ['application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'text/csv'];\n    if (!validFileTypes.includes(file.type)) {\n      error('Please upload a valid Excel (.xls, .xlsx) or CSV file');\n      return;\n    }\n    const formData = new FormData();\n    formData.append('file', file);\n\n    // Set API Props for file upload using setApiProps\n    setApiProps({\n      method: 'POST',\n      url: 'api/upload/schedules/matrix',\n      // Endpoint for file upload\n      postData: formData,\n      render: response => {\n        setIsPopupOpen(false);\n        fetchSchedules();\n        success(response.data.message || 'File uploaded successfully');\n      },\n      catchError: error => {\n        var _error$response, _error$response$data;\n        error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Upload failed');\n      }\n    });\n  };\n  const filteredSchedules = spocschedules.filter(item => item.employee_id !== userDetails.employee_id && (item.employee_name || '').toLowerCase().includes(filter.toLowerCase()));\n\n  // Determine what to display based on scroll limit\n  const displayedItems = filteredSchedules.slice(0, visibleItems.length);\n  useEffect(() => {\n    const token = Cookies.get('jwt_token');\n    if (token) {\n      const decodedToken = jwtDecode(token);\n      setUserDetails(decodedToken.sub);\n    }\n  }, []);\n  const fetchLazySchedules = spocData => {\n    setLoadingMore(true); // Start loader\n\n    const visibleCount = visibleItems.length;\n    const nextItems = spocData.slice(visibleCount, visibleCount + 10);\n    if (nextItems.length > 0) {\n      setVisibleItems(prev => [...prev, ...nextItems]);\n    } else {\n      setHasMore(false);\n    }\n    setLoadingMore(false); // Stop loader\n  };\n  const fetchSchedules = () => {\n    // return new Promise((resolve, reject) => {\n    setApiProps({\n      method: 'GET',\n      url: 'api/get/employee-schedules/all',\n      render: response => {\n        if (response.data) {\n          setSpocschedules(response.data);\n          setVisibleItems([]);\n          setHasMore(true);\n          fetchLazySchedules(response.data);\n          // resolve(response.data);\n        } else {\n          error('Failed to load schedules');\n        }\n      }\n    });\n    // });\n  };\n  useEffect(() => {\n    // Fetch schedules if not already loaded\n    if (spocschedules.length === 0) {\n      fetchSchedules();\n    }\n    if (pickupTimings.length === 0) {\n      setApiProps({\n        method: 'GET',\n        url: 'api/employees/available/pickup-schedules/all',\n        render: response => {\n          if (response.data) {\n            setPickupTimings(response.data);\n          }\n        }\n      });\n    }\n    if (dropTimings.length === 0) {\n      setApiProps({\n        method: 'GET',\n        url: 'api/employees/available/drop-schedules/all',\n        render: response => {\n          if (response.data) {\n            setDropTimings(response.data);\n          }\n        }\n      });\n    }\n  }, [spocschedules, pickupTimings, dropTimings]);\n  const handleWeekSelect = weekRange => {\n    setSelectedWeek(weekRange);\n    const [start, end] = weekRange.split(' - ');\n    const startDate = new Date(start.split('-').reverse().join('-')); // Convert dd-mm-yyyy to yyyy-mm-dd\n    const days = [];\n    for (let i = 0; i < 7; i++) {\n      const day = new Date(startDate);\n      day.setDate(day.getDate() + i);\n      days.push(day.toLocaleDateString('en-GB')); // Use en-GB for dd/mm/yyyy format\n    }\n    setWeekDays(days);\n  };\n  const handleEditPickup = (employeeId, day) => {\n    const eligiblePickupTimings = getEligiblePickupTimings(day);\n    if (eligiblePickupTimings.length === 0) {\n      warn('No eligible pickup timings available.');\n      return;\n    }\n    setEditingPickup({\n      employeeId,\n      day,\n      eligiblePickupTimings,\n      selectedPickupIdx: 0\n    });\n  };\n  const handleEditDrop = (employeeId, day) => {\n    const eligibleDropTimings = getEligibleDropTimings(day);\n    if (eligibleDropTimings.length === 0) {\n      warn('No eligible drop timings available.');\n      return;\n    }\n    setEditingDrop({\n      employeeId,\n      day,\n      eligibleDropTimings,\n      selectedDropIdx: 0\n    });\n  };\n  const handleDeletePickupApiResponse = async response => {\n    if (response.status === 200 || response.status === 201) {\n      info(response.data.message);\n      setEditingPickup(null); // Clear edit state if appropriate\n      await fetchSchedules(); // Re-fetch data cleanly\n    } else if (response.status === 409) {\n      error(response.data.message);\n    } else {\n      console.error('An unexpected error occurred');\n    }\n  };\n  const handlePickupDelete = useCallback((employeeId, day) => {\n    const dateParts = day.split('/');\n    const dayVal = parseInt(dateParts[0], 10);\n    const monthVal = parseInt(dateParts[1], 10) - 1; // Months are 0-indexed\n    const yearVal = parseInt(dateParts[2], 10);\n    const currentDateTime = new Date();\n    const hasFuturePickup = pickupTimings.some(timing => {\n      const [hours, minutes, seconds = '00'] = timing.pickup_time.split(':');\n      const pickupDateTime = new Date(yearVal, monthVal, dayVal, parseInt(hours, 10), parseInt(minutes, 10), parseInt(seconds, 10));\n      return pickupDateTime >= currentDateTime;\n    });\n    if (!hasFuturePickup) {\n      warn('No selected pickup timings available for deletion.');\n      return;\n    }\n    const formattedDate = `${yearVal}-${String(monthVal + 1).padStart(2, '0')}-${String(dayVal).padStart(2, '0')}`;\n    setApiProps({\n      method: 'DELETE',\n      url: `api/employee/pickup-schedule/delete/${employeeId}/${formattedDate}`,\n      render: handleDeletePickupApiResponse\n    });\n  }, [pickupTimings]);\n  const handleDeleteDropApiResponse = async response => {\n    if (response.status === 200 || response.status === 201) {\n      info(response.data.message);\n      setEditingDrop(null); // or setEditingDrop(editingDrop) if needed, but typically you'd clear it\n      await fetchSchedules(); // This safely refetches all updated data\n    } else if (response.status === 409) {\n      error(response.data.message);\n    } else {\n      console.error('An unexpected error occurred');\n    }\n  };\n  const handleDropDelete = useCallback((employeeId, day) => {\n    const dateParts = day.split('/');\n    const dayVal = parseInt(dateParts[0], 10);\n    const monthVal = parseInt(dateParts[1], 10) - 1; // JS months are 0-based\n    const yearVal = parseInt(dateParts[2], 10);\n    const currentDateTime = new Date();\n    const hasFutureDrop = dropTimings.some(timing => {\n      const [hours, minutes, seconds = '00'] = timing.drop_time.split(':');\n      const dropDateTime = new Date(yearVal, monthVal, dayVal, parseInt(hours), parseInt(minutes), parseInt(seconds));\n      return dropDateTime >= currentDateTime;\n    });\n    if (!hasFutureDrop) {\n      warn('No selected drop timings available for deletion.');\n      return;\n    }\n    const formattedDate = `${yearVal}-${String(monthVal + 1).padStart(2, '0')}-${String(dayVal).padStart(2, '0')}`;\n    setApiProps({\n      method: 'DELETE',\n      url: `api/employee/drop-schedule/delete/${employeeId}/${formattedDate}`,\n      render: handleDeleteDropApiResponse\n    });\n  }, [dropTimings]);\n  const handlePickupApiResponse = async response => {\n    if (response.status === 200 || response.status === 201) {\n      success(response.data.message);\n      setEditingPickup(null); // Clear edit state\n      await fetchSchedules(); // Refetch updated data\n    } else if (response.status === 409) {\n      error(response.data.message);\n    } else {\n      console.error('An unexpected error occurred');\n    }\n  };\n  const handlePickupChange = useCallback((event, employeeId, day) => {\n    var _eligiblePickupTiming;\n    const newDate = new Date(day.split('/').reverse().join('-'));\n    const currentDateTime = new Date();\n    const eligiblePickupTimings = pickupTimings.filter(timing => {\n      const pickupDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${timing.pickup_time}`);\n      return pickupDateTime >= currentDateTime;\n    });\n    const pickup = (_eligiblePickupTiming = eligiblePickupTimings[event.target.value]) === null || _eligiblePickupTiming === void 0 ? void 0 : _eligiblePickupTiming.pickup_time;\n    if (!pickup) return;\n    const pickupDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${pickup}`);\n    if (pickupDateTime <= currentDateTime) {\n      warn('Pickup requests must be made less than current time.');\n      setEditingPickup(editingPickup);\n      return;\n    }\n    setApiProps({\n      method: 'POST',\n      url: 'api/create/employee/pickup-schedules',\n      postData: {\n        employee_id: employeeId,\n        shift_date: newDate.toISOString().split('T')[0],\n        pickup_time: pickup,\n        drop_time: null,\n        trip_status: 'Conform'\n      },\n      render: handlePickupApiResponse\n    });\n  }, [pickupTimings]);\n  const handleDropApiResponse = async response => {\n    if (response.status === 200 || response.status === 201) {\n      success(response.data.message);\n      setEditingDrop(null); // Clear editing state\n      await fetchSchedules(); // Safely refetch updated schedules\n    } else if (response.status === 409) {\n      error(response.data.message);\n    } else {\n      console.error('An unexpected error occurred');\n    }\n  };\n  const handleDropChange = useCallback((event, employeeId, day) => {\n    var _eligibleDropTimings$;\n    const newDate = new Date(day.split('/').reverse().join('-'));\n    const currentDateTime = new Date();\n    // Filter eligible drop timings\n    const eligibleDropTimings = dropTimings.filter(timing => {\n      const dropDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${timing.drop_time}`);\n      return dropDateTime >= currentDateTime;\n    });\n    const drop = (_eligibleDropTimings$ = eligibleDropTimings[event.target.value]) === null || _eligibleDropTimings$ === void 0 ? void 0 : _eligibleDropTimings$.drop_time;\n    if (!drop) return;\n    const dropDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${drop}`);\n    if (dropDateTime < currentDateTime) {\n      warn('Drop requests must be made less than current time.');\n      setEditingDrop(editingDrop);\n      return;\n    }\n    setApiProps({\n      method: 'POST',\n      url: 'api/create/employee/drop-schedules',\n      postData: {\n        employee_id: employeeId,\n        shift_date: newDate.toISOString().split('T')[0],\n        pickup_time: null,\n        drop_time: drop,\n        trip_status: 'Conform'\n      },\n      render: handleDropApiResponse\n    });\n  }, [dropTimings]);\n  const getEligiblePickupTimings = day => {\n    const currentDateTime = new Date();\n    return pickupTimings.filter(timing => {\n      const pickupDateTime = new Date(`${day.split('/').reverse().join('-')}T${timing.pickup_time}`);\n      return pickupDateTime >= currentDateTime;\n    });\n  };\n  const getEligibleDropTimings = day => {\n    const currentDateTime = new Date();\n    return dropTimings.filter(timing => {\n      const dropDateTime = new Date(`${day.split('/').reverse().join('-')}T${timing.drop_time}`);\n      return dropDateTime >= currentDateTime;\n    });\n  };\n  const isPastDate = date => {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0); // Set the time to midnight\n    const givenDate = new Date(date.split('/').reverse().join('-'));\n    givenDate.setHours(0, 0, 0, 0); // Set the time to midnight \n    return givenDate < today;\n  };\n  const isWithinAdvancePeriod = date => {\n    const today = new Date();\n    const givenDate = new Date(date.split('/').reverse().join('-'));\n    const advancePeriod = 15 * 24 * 60 * 60 * 1000; // 15 days in milliseconds\n    return givenDate - today <= advancePeriod;\n  };\n  const isPickupTimeWithinPolicy = (pickupTime, weekDay) => {\n    if (!pickupTime || pickupTime === ' -- : --') return true; // Allow if no pickup time  \n    const currentDateTime = new Date();\n    const dateParts = weekDay.split('/');\n    const pickupDateTime = new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}T${pickupTime}`);\n    return pickupDateTime >= currentDateTime;\n  };\n  const isDropTimeWithinPolicy = (dropTime, weekDay) => {\n    if (!dropTime || dropTime === ' -- : --') return true; // Allow if no pickup time\n    const currentDateTime = new Date();\n    const dateParts = weekDay.split('/');\n    const dropDateTime = new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}T${dropTime}`);\n    return dropDateTime >= currentDateTime;\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"Spoc-main-menu\",\n    children: [apiProps && /*#__PURE__*/_jsxDEV(ApiComponent, {\n      ...apiProps\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 20\n    }, this), loadingMore && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"action-buttons-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search...\",\n        className: \"search-input\",\n        onChange: e => setFilter(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"action-buttons-container-with-save\",\n        children: [/*#__PURE__*/_jsxDEV(ScheduleTemplateDownloader, {\n          setApiProps: setApiProps\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(WeekRangePicker, {\n          numberOfWeeks: 7,\n          onWeekSelect: handleWeekSelect\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"button\",\n          className: \"primary-button\",\n          text: \"Upload XL\",\n          onClick: () => setIsPopupOpen(true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spoc-infinte-scroll-containers\",\n      children: /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n        dataLength: displayedItems.length,\n        pullDownToRefreshThreshold: 50,\n        next: () => fetchLazySchedules(spocschedules),\n        hasMore: hasMore,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spoc-schedules-list\",\n          children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n            children: displayedItems.map(each => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"employee-name\",\n                  onClick: () => navigate(`/Employee/Details/${each.employee_id}`),\n                  children: each.employee_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 23\n                }, this), \" - \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"employee-id\",\n                  children: each.employee_id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 151\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 459,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"employee-week-schedule\",\n                children: weekDays.map((weekDay, index) => {\n                  let pickup = ' -- : --';\n                  let drop = ' -- : --';\n\n                  // Ensure correct date format\n                  const dateParts = weekDay.split('/');\n                  const date = new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}`);\n                  const formattedDate = date.toISOString().split('T')[0];\n                  each.schedules.forEach(schedule => {\n                    if (schedule.shift_date === formattedDate) {\n                      pickup = schedule.pickup_time ? schedule.pickup_time : ' -- : --';\n                      drop = schedule.drop_time ? schedule.drop_time : ' -- : --';\n                    }\n                  });\n                  const dayName = date.toLocaleDateString('en-US', {\n                    weekday: 'short'\n                  });\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"day-schedule\",\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: [dayName, \" (\", weekDay, \")\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 483,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        children: \"Pickup:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 485,\n                        columnNumber: 31\n                      }, this), editingPickup && editingPickup.employeeId === each.employee_id && editingPickup.day === weekDay ? /*#__PURE__*/_jsxDEV(\"select\", {\n                        onChange: event => handlePickupChange(event, each.employee_id, weekDay),\n                        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                          children: \"Select\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 490,\n                          columnNumber: 35\n                        }, this), editingPickup.eligiblePickupTimings.map((timing, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: idx,\n                          children: timing.pickup_time\n                        }, idx, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 492,\n                          columnNumber: 37\n                        }, this))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 487,\n                        columnNumber: 33\n                      }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        value: pickup,\n                        readOnly: true,\n                        className: \"time-class\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 496,\n                        columnNumber: 33\n                      }, this), !isPastDate(weekDay) && isWithinAdvancePeriod(weekDay) && isPickupTimeWithinPolicy(pickup, weekDay) && /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(MdEdit, {\n                          className: \"edit-icon\",\n                          onClick: () => handleEditPickup(each.employee_id, weekDay)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 500,\n                          columnNumber: 35\n                        }, this), /*#__PURE__*/_jsxDEV(MdOutlineDeleteOutline, {\n                          className: \"delete-icon\",\n                          onClick: () => handlePickupDelete(each.employee_id, weekDay)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 501,\n                          columnNumber: 35\n                        }, this)]\n                      }, void 0, true)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 484,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        children: \"Drop:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 506,\n                        columnNumber: 31\n                      }, this), editingDrop && editingDrop.employeeId === each.employee_id && editingDrop.day === weekDay ? /*#__PURE__*/_jsxDEV(\"select\", {\n                        onChange: event => handleDropChange(event, each.employee_id, weekDay),\n                        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                          children: \"Select\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 510,\n                          columnNumber: 35\n                        }, this), editingDrop.eligibleDropTimings.map((timing, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: idx,\n                          children: timing.drop_time\n                        }, idx, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 512,\n                          columnNumber: 37\n                        }, this))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 508,\n                        columnNumber: 33\n                      }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        value: drop,\n                        readOnly: true,\n                        className: \"time-class\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 516,\n                        columnNumber: 33\n                      }, this), !isPastDate(weekDay) && isWithinAdvancePeriod(weekDay) && isDropTimeWithinPolicy(drop, weekDay) && /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(MdEdit, {\n                          className: \"edit-icon\",\n                          onClick: () => handleEditDrop(each.employee_id, weekDay)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 520,\n                          columnNumber: 35\n                        }, this), /*#__PURE__*/_jsxDEV(MdOutlineDeleteOutline, {\n                          className: \"delete-icon\",\n                          onClick: () => handleDropDelete(each.employee_id, weekDay)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 521,\n                          columnNumber: 35\n                        }, this)]\n                      }, void 0, true)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 505,\n                      columnNumber: 29\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 482,\n                    columnNumber: 27\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 21\n              }, this)]\n            }, each.employee_id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 13\n          }, this), loadingMore && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Popup, {\n      isOpen: isPopupOpen,\n      onClose: () => setIsPopupOpen(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"operations-bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \".xls,.xlsx,.csv\",\n          onChange: handleFileChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"button\",\n          text: \"upload\",\n          className: \"primary-button\",\n          onClick: handleUpload\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 536,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 441,\n    columnNumber: 5\n  }, this);\n};\n_s(SPOCSchedules, \"hu8LMrhH/JjLq0C2a2AYQxB59UM=\", false, function () {\n  return [useNavigate];\n});\n_c = SPOCSchedules;\nexport default _c2 = /*#__PURE__*/React.memo(SPOCSchedules);\nvar _c, _c2;\n$RefreshReg$(_c, \"SPOCSchedules\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","Popup","Button","Toast","WeekRangePicker","InfiniteScroll","ApiComponent","ScheduleTemplateDownloader","MdEdit","MdOutlineDeleteOutline","Cookies","jwtDecode","Loader","useNavigate","XLSX","jsxDEV","_jsxDEV","Fragment","_Fragment","SPOCSchedules","_s","navigate","warn","info","error","success","isPopupOpen","setIsPopupOpen","apiProps","setApiProps","spocschedules","setSpocschedules","pickupTimings","setPickupTimings","dropTimings","setDropTimings","selectedWeek","setSelectedWeek","filter","setFilter","userDetails","setUserDetails","weekDays","setWeekDays","editingPickup","setEditingPickup","editingDrop","setEditingDrop","visibleItems","setVisibleItems","loadingMore","setLoadingMore","hasMore","setHasMore","file","setFile","handleFileChange","event","target","files","handleUpload","validFileTypes","includes","type","formData","FormData","append","method","url","postData","render","response","fetchSchedules","data","message","catchError","_error$response","_error$response$data","filteredSchedules","item","employee_id","employee_name","toLowerCase","displayedItems","slice","length","token","get","decodedToken","sub","fetchLazySchedules","spocData","visibleCount","nextItems","prev","handleWeekSelect","weekRange","start","end","split","startDate","Date","reverse","join","days","i","day","setDate","getDate","push","toLocaleDateString","handleEditPickup","employeeId","eligiblePickupTimings","getEligiblePickupTimings","selectedPickupIdx","handleEditDrop","eligibleDropTimings","getEligibleDropTimings","selectedDropIdx","handleDeletePickupApiResponse","status","console","handlePickupDelete","dateParts","dayVal","parseInt","monthVal","yearVal","currentDateTime","hasFuturePickup","some","timing","hours","minutes","seconds","pickup_time","pickupDateTime","formattedDate","String","padStart","handleDeleteDropApiResponse","handleDropDelete","hasFutureDrop","drop_time","dropDateTime","handlePickupApiResponse","handlePickupChange","_eligiblePickupTiming","newDate","toISOString","pickup","value","shift_date","trip_status","handleDropApiResponse","handleDropChange","_eligibleDropTimings$","drop","isPastDate","date","today","setHours","givenDate","isWithinAdvancePeriod","advancePeriod","isPickupTimeWithinPolicy","pickupTime","weekDay","isDropTimeWithinPolicy","dropTime","className","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","onChange","e","numberOfWeeks","onWeekSelect","text","onClick","dataLength","pullDownToRefreshThreshold","next","map","each","index","schedules","forEach","schedule","dayName","weekday","idx","readOnly","isOpen","onClose","accept","_c","_c2","memo","$RefreshReg$"],"sources":["C:/Users/annavarapu.7/Transport-frontend/src/Pages/Schedules/SPOC-Schedules-admin.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport Popup from '../../Components/Model';\r\nimport Button from '../../Components/Button';\r\nimport Toast from '../../Components/Toast';\r\nimport WeekRangePicker from '../../Components/WeekRangePicker';\r\nimport InfiniteScroll from 'react-infinite-scroll-component'\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport ApiComponent from '../../Components/API';\r\nimport ScheduleTemplateDownloader from './ScheduleTemplateDownload';\r\nimport { MdEdit, MdOutlineDeleteOutline } from 'react-icons/md';\r\nimport Cookies from 'js-cookie'\r\nimport { jwtDecode } from 'jwt-decode';\r\nimport Loader from '../../Components/Loader';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport * as XLSX from 'xlsx';\r\n\r\nconst SPOCSchedules = () => {\r\n  const navigate = useNavigate()\r\n  const { warn, info, error, success } = Toast();\r\n  const [isPopupOpen, setIsPopupOpen] = useState(false);\r\n  const [apiProps, setApiProps] = useState(null);\r\n  const [spocschedules, setSpocschedules] = useState([]);\r\n  const [pickupTimings, setPickupTimings] = useState([]);\r\n  const [dropTimings, setDropTimings] = useState([]);\r\n  const [selectedWeek, setSelectedWeek] = useState('');\r\n  const [filter, setFilter] = useState('');\r\n  const [userDetails, setUserDetails] = useState({});\r\n  const [weekDays, setWeekDays] = useState([]);\r\n  const [editingPickup, setEditingPickup] = useState(null);\r\n  const [editingDrop, setEditingDrop] = useState(null);\r\n  const [visibleItems, setVisibleItems] = useState([])\r\n  const [loadingMore, setLoadingMore] = useState(false);\r\n  const [hasMore, setHasMore] = useState(true)\r\n  const [file, setFile] = useState(null)\r\n\r\n  const handleFileChange = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      setFile(file);\r\n    }\r\n  };\r\n\r\n\r\n  const handleUpload = async () => {\r\n    if (!file) {\r\n      error('Please select a file');\r\n      return;\r\n    }\r\n    // Check if the file is Excel or CSV\r\n    const validFileTypes = [\r\n      'application/vnd.ms-excel',\r\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n      'text/csv'\r\n    ];\r\n\r\n    if (!validFileTypes.includes(file.type)) {\r\n      error('Please upload a valid Excel (.xls, .xlsx) or CSV file');\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    // Set API Props for file upload using setApiProps\r\n    setApiProps({\r\n      method: 'POST',\r\n      url: 'api/upload/schedules/matrix',  // Endpoint for file upload\r\n      postData: formData,\r\n      render: (response) => {\r\n        setIsPopupOpen(false);\r\n        fetchSchedules();\r\n        success(response.data.message || 'File uploaded successfully');\r\n      },\r\n      catchError: (error) => {\r\n        error(error.response?.data?.error || 'Upload failed');\r\n      },\r\n    });\r\n  };\r\n\r\n\r\n  const filteredSchedules = spocschedules.filter(item =>\r\n    item.employee_id !== userDetails.employee_id &&\r\n    (item.employee_name || '').toLowerCase().includes(filter.toLowerCase())\r\n  );\r\n\r\n  // Determine what to display based on scroll limit\r\n  const displayedItems = filteredSchedules.slice(0, visibleItems.length);\r\n\r\n\r\n  useEffect(() => {\r\n    const token = Cookies.get('jwt_token');\r\n    if (token) {\r\n      const decodedToken = jwtDecode(token);\r\n      setUserDetails(decodedToken.sub);\r\n    }\r\n  }, []);\r\n\r\n\r\n  const fetchLazySchedules = (spocData) => {\r\n    setLoadingMore(true); // Start loader\r\n\r\n    const visibleCount = visibleItems.length;\r\n    const nextItems = spocData.slice(visibleCount, visibleCount + 10);\r\n\r\n    if (nextItems.length > 0) {\r\n      setVisibleItems(prev => [...prev, ...nextItems]);\r\n    } else {\r\n      setHasMore(false);\r\n    }\r\n    setLoadingMore(false); // Stop loader\r\n  };\r\n\r\n\r\n  const fetchSchedules = () => {\r\n    // return new Promise((resolve, reject) => {\r\n      setApiProps({\r\n        method: 'GET',\r\n        url: 'api/get/employee-schedules/all',\r\n        render: (response) => {\r\n          if (response.data) {\r\n            setSpocschedules(response.data);\r\n            setVisibleItems([]);\r\n            setHasMore(true);\r\n            fetchLazySchedules(response.data);\r\n            // resolve(response.data);\r\n          } else {\r\n            error('Failed to load schedules');\r\n          }\r\n        }\r\n      \r\n      });\r\n    // });\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n    // Fetch schedules if not already loaded\r\n    if (spocschedules.length === 0) {\r\n      fetchSchedules()\r\n    }\r\n    \r\n    if (pickupTimings.length === 0) {\r\n      setApiProps({\r\n        method: 'GET',\r\n        url: 'api/employees/available/pickup-schedules/all',\r\n        render: (response) => {\r\n          if (response.data) {\r\n            setPickupTimings(response.data);\r\n          }\r\n        }\r\n      });\r\n    }\r\n    if (dropTimings.length === 0) {\r\n      setApiProps({\r\n        method: 'GET',\r\n        url: 'api/employees/available/drop-schedules/all',\r\n        render: (response) => {\r\n          if (response.data) {\r\n            setDropTimings(response.data);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }, [spocschedules, pickupTimings, dropTimings]);\r\n\r\n\r\n\r\n  const handleWeekSelect = (weekRange) => {\r\n    setSelectedWeek(weekRange);\r\n    const [start, end] = weekRange.split(' - ');\r\n    const startDate = new Date(start.split('-').reverse().join('-')); // Convert dd-mm-yyyy to yyyy-mm-dd\r\n    const days = [];\r\n    for (let i = 0; i < 7; i++) {\r\n      const day = new Date(startDate);\r\n      day.setDate(day.getDate() + i);\r\n      days.push(day.toLocaleDateString('en-GB')); // Use en-GB for dd/mm/yyyy format\r\n    }\r\n    setWeekDays(days);\r\n  };\r\n\r\n\r\n  const handleEditPickup = (employeeId, day) => {\r\n    const eligiblePickupTimings = getEligiblePickupTimings(day);\r\n    if (eligiblePickupTimings.length === 0) {\r\n      warn('No eligible pickup timings available.');\r\n      return;\r\n    }\r\n    setEditingPickup({ employeeId, day, eligiblePickupTimings, selectedPickupIdx: 0 });\r\n  };\r\n\r\n\r\n  const handleEditDrop = (employeeId, day) => {\r\n    const eligibleDropTimings = getEligibleDropTimings(day);\r\n    if (eligibleDropTimings.length === 0) {\r\n      warn('No eligible drop timings available.');\r\n      return;\r\n    }\r\n    setEditingDrop({ employeeId, day, eligibleDropTimings, selectedDropIdx: 0 });\r\n  };\r\n\r\n\r\n  const handleDeletePickupApiResponse = async (response) => {\r\n    if (response.status === 200 || response.status === 201) {\r\n      info(response.data.message);\r\n      setEditingPickup(null); // Clear edit state if appropriate\r\n      await fetchSchedules(); // Re-fetch data cleanly\r\n    } else if (response.status === 409) {\r\n      error(response.data.message);\r\n    } else {\r\n      console.error('An unexpected error occurred');\r\n    }\r\n  };\r\n\r\n\r\n  const handlePickupDelete = useCallback((employeeId, day) => {\r\n    const dateParts = day.split('/');\r\n    const dayVal = parseInt(dateParts[0], 10);\r\n    const monthVal = parseInt(dateParts[1], 10) - 1; // Months are 0-indexed\r\n    const yearVal = parseInt(dateParts[2], 10);\r\n\r\n    const currentDateTime = new Date();\r\n\r\n    const hasFuturePickup = pickupTimings.some(timing => {\r\n      const [hours, minutes, seconds = '00'] = timing.pickup_time.split(':');\r\n      const pickupDateTime = new Date(\r\n        yearVal,\r\n        monthVal,\r\n        dayVal,\r\n        parseInt(hours, 10),\r\n        parseInt(minutes, 10),\r\n        parseInt(seconds, 10)\r\n      );\r\n\r\n      return pickupDateTime >= currentDateTime;\r\n    });\r\n\r\n    if (!hasFuturePickup) {\r\n      warn('No selected pickup timings available for deletion.');\r\n      return;\r\n    }\r\n    const formattedDate = `${yearVal}-${String(monthVal + 1).padStart(2, '0')}-${String(dayVal).padStart(2, '0')}`;\r\n\r\n    setApiProps({\r\n      method: 'DELETE',\r\n      url: `api/employee/pickup-schedule/delete/${employeeId}/${formattedDate}`,\r\n      render: handleDeletePickupApiResponse,\r\n    });\r\n\r\n  }, [pickupTimings]);\r\n\r\n\r\n\r\n  const handleDeleteDropApiResponse = async (response) => {\r\n    if (response.status === 200 || response.status === 201) {\r\n      info(response.data.message);\r\n      setEditingDrop(null); // or setEditingDrop(editingDrop) if needed, but typically you'd clear it\r\n      await fetchSchedules(); // This safely refetches all updated data\r\n    } else if (response.status === 409) {\r\n      error(response.data.message);\r\n    } else {\r\n      console.error('An unexpected error occurred');\r\n    }\r\n  };\r\n\r\n\r\n  const handleDropDelete = useCallback((employeeId, day) => {\r\n    const dateParts = day.split('/');\r\n    const dayVal = parseInt(dateParts[0], 10);\r\n    const monthVal = parseInt(dateParts[1], 10) - 1; // JS months are 0-based\r\n    const yearVal = parseInt(dateParts[2], 10);\r\n\r\n    const currentDateTime = new Date();\r\n\r\n    const hasFutureDrop = dropTimings.some(timing => {\r\n      const [hours, minutes, seconds = '00'] = timing.drop_time.split(':');\r\n      const dropDateTime = new Date(yearVal, monthVal, dayVal, parseInt(hours), parseInt(minutes), parseInt(seconds));\r\n\r\n      return dropDateTime >= currentDateTime;\r\n    });\r\n\r\n    if (!hasFutureDrop) {\r\n      warn('No selected drop timings available for deletion.');\r\n      return;\r\n    }\r\n\r\n    const formattedDate = `${yearVal}-${String(monthVal + 1).padStart(2, '0')}-${String(dayVal).padStart(2, '0')}`;\r\n\r\n    setApiProps({\r\n      method: 'DELETE',\r\n      url: `api/employee/drop-schedule/delete/${employeeId}/${formattedDate}`,\r\n      render: handleDeleteDropApiResponse,\r\n    });\r\n\r\n  }, [dropTimings]);\r\n\r\n\r\n\r\n\r\n\r\n  const handlePickupApiResponse = async (response) => {\r\n    if (response.status === 200 || response.status === 201) {\r\n      success(response.data.message);\r\n      setEditingPickup(null); // Clear edit state\r\n      await fetchSchedules(); // Refetch updated data\r\n    } else if (response.status === 409) {\r\n      error(response.data.message);\r\n    } else {\r\n      console.error('An unexpected error occurred');\r\n    }\r\n  };\r\n\r\n\r\n  const handlePickupChange = useCallback((event, employeeId, day) => {\r\n    const newDate = new Date(day.split('/').reverse().join('-'));\r\n    const currentDateTime = new Date();\r\n\r\n    const eligiblePickupTimings = pickupTimings.filter(timing => {\r\n      const pickupDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${timing.pickup_time}`);\r\n      return pickupDateTime >= currentDateTime;\r\n    });\r\n\r\n    const pickup = eligiblePickupTimings[event.target.value]?.pickup_time;\r\n    if (!pickup) return;\r\n    const pickupDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${pickup}`);\r\n\r\n    if (pickupDateTime <= currentDateTime) {\r\n      warn('Pickup requests must be made less than current time.');\r\n      setEditingPickup(editingPickup);\r\n      return;\r\n    }\r\n    setApiProps({\r\n      method: 'POST',\r\n      url: 'api/create/employee/pickup-schedules',\r\n      postData: {\r\n        employee_id: employeeId,\r\n        shift_date: newDate.toISOString().split('T')[0],\r\n        pickup_time: pickup,\r\n        drop_time: null,\r\n        trip_status: 'Conform',\r\n      },\r\n      render: handlePickupApiResponse,\r\n    });\r\n  }, [pickupTimings]);\r\n\r\n\r\n\r\n\r\n  const handleDropApiResponse = async (response) => {\r\n    if (response.status === 200 || response.status === 201) {\r\n      success(response.data.message);\r\n      setEditingDrop(null); // Clear editing state\r\n      await fetchSchedules(); // Safely refetch updated schedules\r\n    } else if (response.status === 409) {\r\n      error(response.data.message);\r\n    } else {\r\n      console.error('An unexpected error occurred');\r\n    }\r\n  };\r\n\r\n\r\n  const handleDropChange = useCallback((event, employeeId, day) => {\r\n    const newDate = new Date(day.split('/').reverse().join('-'));\r\n    const currentDateTime = new Date();\r\n    // Filter eligible drop timings\r\n    const eligibleDropTimings = dropTimings.filter(timing => {\r\n      const dropDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${timing.drop_time}`);\r\n      return dropDateTime >= currentDateTime;\r\n    });\r\n    const drop = eligibleDropTimings[event.target.value]?.drop_time;\r\n    if (!drop) return;\r\n    const dropDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${drop}`);\r\n    if (dropDateTime < currentDateTime) {\r\n      warn('Drop requests must be made less than current time.');\r\n      setEditingDrop(editingDrop)\r\n      return;\r\n    }\r\n    setApiProps({\r\n      method: 'POST',\r\n      url: 'api/create/employee/drop-schedules',\r\n      postData: {\r\n        employee_id: employeeId,\r\n        shift_date: newDate.toISOString().split('T')[0],\r\n        pickup_time: null,\r\n        drop_time: drop,\r\n        trip_status: 'Conform',\r\n      },\r\n      render: handleDropApiResponse,\r\n    });\r\n  }, [dropTimings]);\r\n\r\n\r\n\r\n  const getEligiblePickupTimings = (day) => {\r\n    const currentDateTime = new Date();\r\n    return pickupTimings.filter(timing => {\r\n      const pickupDateTime = new Date(`${day.split('/').reverse().join('-')}T${timing.pickup_time}`);\r\n      return pickupDateTime >= currentDateTime;\r\n    });\r\n  };\r\n\r\n  const getEligibleDropTimings = (day) => {\r\n    const currentDateTime = new Date();\r\n    return dropTimings.filter(timing => {\r\n      const dropDateTime = new Date(`${day.split('/').reverse().join('-')}T${timing.drop_time}`);\r\n      return dropDateTime >= currentDateTime;\r\n    });\r\n  };\r\n\r\n  const isPastDate = (date) => {\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0); // Set the time to midnight\r\n    const givenDate = new Date(date.split('/').reverse().join('-'));\r\n    givenDate.setHours(0, 0, 0, 0); // Set the time to midnight \r\n    return givenDate < today;\r\n  };\r\n\r\n  const isWithinAdvancePeriod = (date) => {\r\n    const today = new Date();\r\n    const givenDate = new Date(date.split('/').reverse().join('-'));\r\n    const advancePeriod = 15 * 24 * 60 * 60 * 1000; // 15 days in milliseconds\r\n    return givenDate - today <= advancePeriod;\r\n  };\r\n\r\n  const isPickupTimeWithinPolicy = (pickupTime, weekDay) => {\r\n    if (!pickupTime || pickupTime === ' -- : --') return true; // Allow if no pickup time  \r\n    const currentDateTime = new Date();\r\n    const dateParts = weekDay.split('/');\r\n    const pickupDateTime = new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}T${pickupTime}`);\r\n    return pickupDateTime >= currentDateTime\r\n  };\r\n\r\n  const isDropTimeWithinPolicy = (dropTime, weekDay) => {\r\n    if (!dropTime || dropTime === ' -- : --') return true; // Allow if no pickup time\r\n    const currentDateTime = new Date();\r\n    const dateParts = weekDay.split('/');\r\n    const dropDateTime = new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}T${dropTime}`);\r\n    return dropDateTime >= currentDateTime\r\n  }\r\n\r\n  return (\r\n    <form className='Spoc-main-menu'>\r\n      {apiProps && <ApiComponent {...apiProps} />}\r\n      {loadingMore && <Loader/>}\r\n      <div className='action-buttons-container'>\r\n        <input type=\"text\" placeholder=\"Search...\" className='search-input' onChange={(e) => setFilter(e.target.value)} />\r\n        <div className='action-buttons-container-with-save'>\r\n          <ScheduleTemplateDownloader setApiProps={setApiProps} />\r\n          <WeekRangePicker numberOfWeeks={7} onWeekSelect={handleWeekSelect} />\r\n          <Button type='button' className='primary-button' text='Upload XL' onClick={() => setIsPopupOpen(true)} />\r\n        </div>\r\n      </div>\r\n      <div className='spoc-infinte-scroll-containers'>\r\n        <InfiniteScroll dataLength={displayedItems.length} pullDownToRefreshThreshold={50} next={() => fetchLazySchedules(spocschedules)} hasMore={hasMore} >\r\n          <div className='spoc-schedules-list'>\r\n            <ul>\r\n              {displayedItems\r\n                .map((each) => (\r\n                  <li key={each.employee_id}>\r\n                    <h4>\r\n                      <span className='employee-name' onClick={() => navigate(`/Employee/Details/${each.employee_id}`)}>{each.employee_name}</span> - <span className='employee-id'>{each.employee_id}</span>\r\n                    </h4>\r\n                    <div className='employee-week-schedule'>\r\n                      {weekDays.map((weekDay, index) => {\r\n                        let pickup = ' -- : --';\r\n                        let drop = ' -- : --';\r\n\r\n                        // Ensure correct date format\r\n                        const dateParts = weekDay.split('/');\r\n                        const date = new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}`);\r\n                        const formattedDate = date.toISOString().split('T')[0];\r\n\r\n                        each.schedules.forEach((schedule) => {\r\n                          if (schedule.shift_date === formattedDate) {\r\n                            pickup = schedule.pickup_time ? schedule.pickup_time : ' -- : --';\r\n                            drop = schedule.drop_time ? schedule.drop_time : ' -- : --';\r\n                          }\r\n                        });\r\n\r\n                        const dayName = date.toLocaleDateString('en-US', { weekday: 'short' });\r\n\r\n                        return (\r\n                          <div key={index} className='day-schedule'>\r\n                            <strong>{dayName} ({weekDay})</strong>\r\n                            <div>\r\n                              <label>Pickup:</label>\r\n                              {editingPickup && editingPickup.employeeId === each.employee_id && editingPickup.day === weekDay ? (\r\n                                <select\r\n                                  onChange={(event) => handlePickupChange(event, each.employee_id, weekDay)}\r\n                                >\r\n                                  <option>Select</option>\r\n                                  {editingPickup.eligiblePickupTimings.map((timing, idx) => (\r\n                                    <option key={idx} value={idx}>{timing.pickup_time}</option>\r\n                                  ))}\r\n                                </select>\r\n                              ) : (\r\n                                <input type=\"text\" value={pickup} readOnly className='time-class' />\r\n                              )}\r\n                              {!isPastDate(weekDay) && isWithinAdvancePeriod(weekDay) && isPickupTimeWithinPolicy(pickup, weekDay) && (\r\n                                <>\r\n                                  <MdEdit className='edit-icon' onClick={() => handleEditPickup(each.employee_id, weekDay)} />\r\n                                  <MdOutlineDeleteOutline className='delete-icon' onClick={() => handlePickupDelete(each.employee_id, weekDay)} />\r\n                                </>\r\n                              )}\r\n                            </div>\r\n                            <div>\r\n                              <label>Drop:</label>\r\n                              {editingDrop && editingDrop.employeeId === each.employee_id && editingDrop.day === weekDay ? (\r\n                                <select onChange={(event) => handleDropChange(event, each.employee_id, weekDay)}\r\n                                >\r\n                                  <option>Select</option>\r\n                                  {editingDrop.eligibleDropTimings.map((timing, idx) => (\r\n                                    <option key={idx} value={idx}>{timing.drop_time}</option>\r\n                                  ))}\r\n                                </select>\r\n                              ) : (\r\n                                <input type=\"text\" value={drop} readOnly className='time-class' />\r\n                              )}\r\n                              {!isPastDate(weekDay) && isWithinAdvancePeriod(weekDay) && isDropTimeWithinPolicy(drop, weekDay) && (\r\n                                <>\r\n                                  <MdEdit className='edit-icon' onClick={() => handleEditDrop(each.employee_id, weekDay)} />\r\n                                  <MdOutlineDeleteOutline className='delete-icon' onClick={() => handleDropDelete(each.employee_id, weekDay)} />\r\n                                </>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </li>\r\n                ))}\r\n            </ul>\r\n            {loadingMore && <Loader />}\r\n          </div>\r\n        </InfiniteScroll>\r\n      </div>\r\n      <Popup isOpen={isPopupOpen} onClose={() => setIsPopupOpen(false)}>\r\n        <div className='operations-bar'>\r\n          <input type=\"file\" accept=\".xls,.xlsx,.csv\" onChange={handleFileChange} />\r\n          <Button type=\"button\" text='upload' className='primary-button' onClick={handleUpload} />\r\n          {/* <Button type=\"button\" text='Download' className='primary-button' /> */}\r\n        </div>\r\n      </Popup>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default React.memo(SPOCSchedules);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}