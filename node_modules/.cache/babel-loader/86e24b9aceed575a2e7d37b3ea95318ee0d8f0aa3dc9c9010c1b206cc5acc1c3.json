{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\annavarapu.7\\\\Transport-frontend\\\\src\\\\Pages\\\\Schedules\\\\SelfEmployeeSchedules.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport Popup from '../../Components/Model';\nimport Button from '../../Components/Button';\nimport Toast from '../../Components/Toast';\nimport WeekRangePicker from '../../Components/WeekRangePicker';\nimport Cookies from 'js-cookie';\nimport { useNavigate } from 'react-router-dom';\nimport { jwtDecode } from 'jwt-decode';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport ApiComponent from '../../Components/API';\nimport { MdEdit, MdOutlineDeleteOutline } from 'react-icons/md';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst EmployeeSchedules = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    warn,\n    info,\n    error,\n    success\n  } = Toast();\n  const [isPopupOpen, setIsPopupOpen] = useState(false);\n  const [apiProps, setApiProps] = useState(null);\n  const [spocschedules, setSpocschedules] = useState([]);\n  const [pickupTimings, setPickupTimings] = useState([]);\n  const [dropTimings, setDropTimings] = useState([]);\n  const [selectedWeek, setSelectedWeek] = useState('');\n  const [weekDays, setWeekDays] = useState([]);\n  const [editingPickup, setEditingPickup] = useState(null);\n  const [editingDrop, setEditingDrop] = useState(null);\n  const [userDetails, setUserDetails] = useState({});\n  useEffect(() => {\n    const token = Cookies.get('jwt_token');\n    if (token) {\n      const decodedToken = jwtDecode(token);\n      setUserDetails(decodedToken.sub);\n    }\n  }, []);\n  useEffect(() => {\n    if (userDetails.employee_id) {\n      if (spocschedules.length === 0) {\n        setApiProps({\n          method: 'GET',\n          url: `api/get/employee-schedules/self/${userDetails.employee_id}`,\n          render: response => {\n            if (response.data) {\n              setSpocschedules(response.data);\n            }\n          }\n        });\n      }\n      if (pickupTimings.length === 0) {\n        setApiProps({\n          method: 'GET',\n          url: 'api/employees/available/pickup-schedules/all',\n          render: response => {\n            if (response.data) {\n              setPickupTimings(response.data);\n            }\n          }\n        });\n      }\n      if (dropTimings.length === 0) {\n        setApiProps({\n          method: 'GET',\n          url: 'api/employees/available/drop-schedules/all',\n          render: response => {\n            if (response.data) {\n              setDropTimings(response.data);\n            }\n          }\n        });\n      }\n    }\n  }, [userDetails, spocschedules, pickupTimings, dropTimings]);\n  const handleWeekSelect = weekRange => {\n    setSelectedWeek(weekRange);\n    const [start, end] = weekRange.split(' - ');\n    const startDate = new Date(start.split('-').reverse().join('-')); // Convert dd-mm-yyyy to yyyy-mm-dd\n    const days = [];\n    for (let i = 0; i < 7; i++) {\n      const day = new Date(startDate);\n      day.setDate(day.getDate() + i);\n      days.push(day.toLocaleDateString('en-GB')); // Use en-GB for dd/mm/yyyy format\n    }\n    setWeekDays(days);\n  };\n  const handleEditPickup = (employeeId, day) => {\n    const eligiblePickupTimings = getEligiblePickupTimings(day);\n    if (eligiblePickupTimings.length === 0) {\n      warn('No eligible pickup timings available.');\n      return;\n    }\n    setEditingPickup({\n      employeeId,\n      day,\n      eligiblePickupTimings,\n      selectedPickupIdx: 0\n    });\n  };\n  const handleEditDrop = (employeeId, day) => {\n    const eligibleDropTimings = getEligibleDropTimings(day);\n    if (eligibleDropTimings.length === 0) {\n      warn('No eligible drop timings available.');\n      return;\n    }\n    setEditingDrop({\n      employeeId,\n      day,\n      eligibleDropTimings,\n      selectedDropIdx: 0\n    });\n  };\n  const handleDeletePickupApiResponse = response => {\n    if (response.status === 200 || response.status === 201) {\n      info(response.data.message);\n      setEditingPickup(editingPickup);\n      setApiProps({\n        method: 'GET',\n        url: `api/get/employee-schedules/self/${userDetails.employee_id}`,\n        render: response => {\n          if (response.data) {\n            setSpocschedules(response.data);\n          }\n        }\n      });\n    } else if (response.status === 409) {\n      error(response.data.message);\n    } else {\n      console.error('An unexpected error occurred');\n    }\n  };\n  const handlePickupDelete = useCallback((employeeId, day) => {\n    const dateParts = day.split('/');\n    const dayVal = parseInt(dateParts[0], 10);\n    const monthVal = parseInt(dateParts[1], 10) - 1; // Months are 0-indexed\n    const yearVal = parseInt(dateParts[2], 10);\n    const currentDateTime = new Date();\n    const hasFuturePickup = pickupTimings.some(timing => {\n      const [hours, minutes, seconds = '00'] = timing.pickup_time.split(':');\n      const pickupDateTime = new Date(yearVal, monthVal, dayVal, parseInt(hours, 10), parseInt(minutes, 10), parseInt(seconds, 10));\n      return pickupDateTime - currentDateTime >= 6 * 60 * 60 * 1000;\n    });\n    if (!hasFuturePickup) {\n      warn('No selected pickup timings available for deletion.');\n      return;\n    }\n    const formattedDate = `${yearVal}-${String(monthVal + 1).padStart(2, '0')}-${String(dayVal).padStart(2, '0')}`;\n    setApiProps({\n      method: 'DELETE',\n      url: `api/employee/pickup-schedule/delete/${employeeId}/${formattedDate}`,\n      render: handleDeletePickupApiResponse\n    });\n  }, [pickupTimings]);\n  const handleDeleteDropApiResponse = response => {\n    if (response.status === 200 || response.status === 201) {\n      info(response.data.message);\n      setEditingDrop(editingDrop);\n      setApiProps({\n        method: 'GET',\n        url: `api/get/employee-schedules/self/${userDetails.employee_id}`,\n        render: response => {\n          if (response.data) {\n            setSpocschedules(response.data);\n          }\n        }\n      });\n    } else if (response.status === 409) {\n      error(response.data.message);\n    } else {\n      console.error('An unexpected error occurred');\n    }\n  };\n  const handleDropDelete = useCallback((employeeId, day) => {\n    const dateParts = day.split('/');\n    const dayVal = parseInt(dateParts[0], 10);\n    const monthVal = parseInt(dateParts[1], 10) - 1; // JS months are 0-based\n    const yearVal = parseInt(dateParts[2], 10);\n    const currentDateTime = new Date();\n    const hasFutureDrop = dropTimings.some(timing => {\n      const [hours, minutes, seconds = '00'] = timing.drop_time.split(':');\n      const dropDateTime = new Date(yearVal, monthVal, dayVal, parseInt(hours), parseInt(minutes), parseInt(seconds));\n      return dropDateTime - currentDateTime >= 4 * 60 * 60 * 1000;\n      ;\n    });\n    if (!hasFutureDrop) {\n      warn('No selected drop timings available for deletion.');\n      return;\n    }\n    const formattedDate = `${yearVal}-${String(monthVal + 1).padStart(2, '0')}-${String(dayVal).padStart(2, '0')}`;\n    setApiProps({\n      method: 'DELETE',\n      url: `api/employee/drop-schedule/delete/${employeeId}/${formattedDate}`,\n      render: handleDeleteDropApiResponse\n    });\n  }, [dropTimings]);\n  const handlePickupApiResponse = response => {\n    if (response.status === 200 || response.status === 201) {\n      success(response.data.message);\n      setEditingPickup(editingPickup);\n      setApiProps({\n        method: 'GET',\n        url: `api/get/employee-schedules/self/${userDetails.employee_id}`,\n        render: response => {\n          if (response.data) {\n            setSpocschedules(response.data);\n          }\n        }\n      });\n    } else if (response.status === 409) {\n      error(response.data.message);\n    } else {\n      console.error('An unexpected error occurred');\n    }\n  };\n  const handlePickupChange = useCallback((event, employeeId, day) => {\n    var _eligiblePickupTiming;\n    const newDate = new Date(day.split('/').reverse().join('-'));\n    const currentDateTime = new Date();\n    const eligiblePickupTimings = pickupTimings.filter(timing => {\n      const pickupDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${timing.pickup_time}`);\n      return pickupDateTime - currentDateTime >= 6 * 60 * 60 * 1000;\n    });\n    const pickup = (_eligiblePickupTiming = eligiblePickupTimings[event.target.value]) === null || _eligiblePickupTiming === void 0 ? void 0 : _eligiblePickupTiming.pickup_time;\n    if (!pickup) return;\n    const pickupDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${pickup}`);\n    if (pickupDateTime - currentDateTime < 6 * 60 * 60 * 1000) {\n      warn('Pickup requests must be made at least 6 hours in advance.');\n      setEditingPickup(editingPickup);\n      return;\n    }\n    setApiProps({\n      method: 'POST',\n      url: 'api/create/employee/pickup-schedules',\n      postData: {\n        employee_id: employeeId,\n        shift_date: newDate.toISOString().split('T')[0],\n        pickup_time: pickup,\n        drop_time: null,\n        trip_status: 'Conform'\n      },\n      render: handlePickupApiResponse\n    });\n  }, [pickupTimings]);\n  const handleDropApiResponse = response => {\n    if (response.status === 200 || response.status === 201) {\n      success(response.data.message);\n      setEditingDrop(editingDrop);\n      setApiProps({\n        method: 'GET',\n        url: `api/get/employee-schedules/self/${userDetails.employee_id}`,\n        render: response => {\n          if (response.data) {\n            setSpocschedules(response.data);\n          }\n        }\n      });\n    } else if (response.status === 409) {\n      error(response.data.message);\n    } else {\n      console.error('An unexpected error occurred');\n    }\n  };\n  const handleDropChange = useCallback((event, employeeId, day) => {\n    var _eligibleDropTimings$;\n    const newDate = new Date(day.split('/').reverse().join('-'));\n    const currentDateTime = new Date();\n\n    // Filter eligible drop timings\n    const eligibleDropTimings = dropTimings.filter(timing => {\n      const dropDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${timing.drop_time}`);\n      return dropDateTime - currentDateTime >= 4 * 60 * 60 * 1000;\n    });\n    const drop = (_eligibleDropTimings$ = eligibleDropTimings[event.target.value]) === null || _eligibleDropTimings$ === void 0 ? void 0 : _eligibleDropTimings$.drop_time;\n    if (!drop) return;\n    const dropDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${drop}`);\n    if (dropDateTime - currentDateTime < 4 * 60 * 60 * 1000) {\n      warn('Drop requests must be made at least 4 hours in advance.');\n      return;\n    }\n    setApiProps({\n      method: 'POST',\n      url: 'api/create/employee/drop-schedules',\n      postData: {\n        employee_id: employeeId,\n        shift_date: newDate.toISOString().split('T')[0],\n        pickup_time: null,\n        drop_time: drop,\n        trip_status: 'Conform'\n      },\n      render: handleDropApiResponse\n    });\n  }, [dropTimings]);\n  const getEligiblePickupTimings = day => {\n    const currentDateTime = new Date();\n    return pickupTimings.filter(timing => {\n      const pickupDateTime = new Date(`${day.split('/').reverse().join('-')}T${timing.pickup_time}`);\n      return pickupDateTime - currentDateTime >= 6 * 60 * 60 * 1000;\n    });\n  };\n  const getEligibleDropTimings = day => {\n    const currentDateTime = new Date();\n    return dropTimings.filter(timing => {\n      const dropDateTime = new Date(`${day.split('/').reverse().join('-')}T${timing.drop_time}`);\n      return dropDateTime - currentDateTime >= 4 * 60 * 60 * 1000;\n    });\n  };\n  const isPastDate = date => {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0); // Set the time to midnight\n\n    const givenDate = new Date(date.split('/').reverse().join('-'));\n    givenDate.setHours(0, 0, 0, 0); // Set the time to midnight   \n\n    return givenDate < today;\n  };\n  const isWithinAdvancePeriod = date => {\n    const today = new Date();\n    const givenDate = new Date(date.split('/').reverse().join('-'));\n    const advancePeriod = 15 * 24 * 60 * 60 * 1000; // 15 days in milliseconds\n    return givenDate - today <= advancePeriod;\n  };\n  const isPickupTimeWithinPolicy = (pickupTime, weekDay) => {\n    if (!pickupTime || pickupTime === ' -- : --') return true; // Allow if no pickup time\n\n    const currentDateTime = new Date();\n    const dateParts = weekDay.split('/');\n    const pickupDateTime = new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}T${pickupTime}`);\n\n    // Check if the pickup time is at least 6 hours from now\n    const sixHoursInMillis = 6 * 60 * 60 * 1000;\n    return pickupDateTime - currentDateTime >= sixHoursInMillis;\n  };\n  const isDropTimeWithinPolicy = (dropTime, weekDay) => {\n    if (!dropTime || dropTime === ' -- : --') return true; // Allow if no pickup time\n\n    const currentDateTime = new Date();\n    const dateParts = weekDay.split('/');\n    const dropDateTime = new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}T${dropTime}`);\n\n    // Check if the pickup time is at least 6 hours from now\n    const fourHoursInMillis = 4 * 60 * 60 * 1000;\n    return dropDateTime - currentDateTime >= fourHoursInMillis;\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"Spoc-main-menu\",\n    children: [apiProps && /*#__PURE__*/_jsxDEV(ApiComponent, {\n      ...apiProps\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"action-buttons-container\",\n      children: /*#__PURE__*/_jsxDEV(WeekRangePicker, {\n        numberOfWeeks: 7,\n        onWeekSelect: handleWeekSelect\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spoc-schedules-list\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: spocschedules.map(each => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"employee-name\",\n              onClick: () => navigate(`/Employee/Details/${each.employee_id}`),\n              children: each.employee_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 17\n            }, this), \" - \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"employee-id\",\n              children: each.employee_id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 144\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"employee-week-schedule\",\n            children: weekDays.map((weekDay, index) => {\n              let pickup = ' -- : --';\n              let drop = ' -- : --';\n\n              // Ensure correct date format\n              const dateParts = weekDay.split('/');\n              const date = new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}`);\n              const formattedDate = date.toISOString().split('T')[0];\n              each.schedules.forEach(schedule => {\n                if (schedule.shift_date === formattedDate) {\n                  pickup = schedule.pickup_time ? schedule.pickup_time : ' -- : --';\n                  drop = schedule.drop_time ? schedule.drop_time : ' -- : --';\n                }\n              });\n              const dayName = date.toLocaleDateString('en-US', {\n                weekday: 'short'\n              });\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"day-schedule\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: [dayName, \" (\", weekDay, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 424,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Pickup:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 426,\n                    columnNumber: 25\n                  }, this), editingPickup && editingPickup.employeeId === each.employee_id && editingPickup.day === weekDay ? /*#__PURE__*/_jsxDEV(\"select\", {\n                    onChange: event => handlePickupChange(event, each.employee_id, weekDay),\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      children: \"Select\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 431,\n                      columnNumber: 29\n                    }, this), editingPickup.eligiblePickupTimings.map((timing, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: idx,\n                      children: timing.pickup_time\n                    }, idx, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 433,\n                      columnNumber: 31\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 428,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: pickup,\n                    readOnly: true,\n                    className: \"time-class\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 437,\n                    columnNumber: 27\n                  }, this), !isPastDate(weekDay) && isWithinAdvancePeriod(weekDay) && isPickupTimeWithinPolicy(pickup, weekDay) && /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(MdEdit, {\n                      className: \"edit-icon\",\n                      onClick: () => handleEditPickup(each.employee_id, weekDay)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 441,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(MdOutlineDeleteOutline, {\n                      className: \"delete-icon\",\n                      onClick: () => handlePickupDelete(each.employee_id, weekDay)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 442,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 425,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Drop:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 447,\n                    columnNumber: 25\n                  }, this), editingDrop && editingDrop.employeeId === each.employee_id && editingDrop.day === weekDay ? /*#__PURE__*/_jsxDEV(\"select\", {\n                    onChange: event => handleDropChange(event, each.employee_id, weekDay),\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      children: \"Select\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 451,\n                      columnNumber: 29\n                    }, this), editingDrop.eligibleDropTimings.map((timing, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: idx,\n                      children: timing.drop_time\n                    }, idx, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 453,\n                      columnNumber: 31\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 449,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: drop,\n                    readOnly: true,\n                    className: \"time-class\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 457,\n                    columnNumber: 27\n                  }, this), !isPastDate(weekDay) && isWithinAdvancePeriod(weekDay) && isDropTimeWithinPolicy(drop, weekDay) && /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(MdEdit, {\n                      className: \"edit-icon\",\n                      onClick: () => handleEditDrop(each.employee_id, weekDay)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 461,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(MdOutlineDeleteOutline, {\n                      className: \"delete-icon\",\n                      onClick: () => handleDropDelete(each.employee_id, weekDay)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 462,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 446,\n                  columnNumber: 23\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 15\n          }, this)]\n        }, each.employee_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Popup, {\n      isOpen: isPopupOpen,\n      onClose: () => setIsPopupOpen(false),\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Select a file format for all invoices\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"button\",\n          className: \"primary-button\",\n          text: \"Ok\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"button\",\n          className: \"primary-button\",\n          text: \"Cancel\",\n          onClick: () => setIsPopupOpen(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 387,\n    columnNumber: 5\n  }, this);\n};\n_s(EmployeeSchedules, \"KEw4nsVaRSpaX/H1mCtpS/sZsJM=\", false, function () {\n  return [useNavigate];\n});\n_c = EmployeeSchedules;\nexport default EmployeeSchedules;\nvar _c;\n$RefreshReg$(_c, \"EmployeeSchedules\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Popup","Button","Toast","WeekRangePicker","Cookies","useNavigate","jwtDecode","ApiComponent","MdEdit","MdOutlineDeleteOutline","jsxDEV","_jsxDEV","Fragment","_Fragment","EmployeeSchedules","_s","navigate","warn","info","error","success","isPopupOpen","setIsPopupOpen","apiProps","setApiProps","spocschedules","setSpocschedules","pickupTimings","setPickupTimings","dropTimings","setDropTimings","selectedWeek","setSelectedWeek","weekDays","setWeekDays","editingPickup","setEditingPickup","editingDrop","setEditingDrop","userDetails","setUserDetails","token","get","decodedToken","sub","employee_id","length","method","url","render","response","data","handleWeekSelect","weekRange","start","end","split","startDate","Date","reverse","join","days","i","day","setDate","getDate","push","toLocaleDateString","handleEditPickup","employeeId","eligiblePickupTimings","getEligiblePickupTimings","selectedPickupIdx","handleEditDrop","eligibleDropTimings","getEligibleDropTimings","selectedDropIdx","handleDeletePickupApiResponse","status","message","console","handlePickupDelete","dateParts","dayVal","parseInt","monthVal","yearVal","currentDateTime","hasFuturePickup","some","timing","hours","minutes","seconds","pickup_time","pickupDateTime","formattedDate","String","padStart","handleDeleteDropApiResponse","handleDropDelete","hasFutureDrop","drop_time","dropDateTime","handlePickupApiResponse","handlePickupChange","event","_eligiblePickupTiming","newDate","filter","toISOString","pickup","target","value","postData","shift_date","trip_status","handleDropApiResponse","handleDropChange","_eligibleDropTimings$","drop","isPastDate","date","today","setHours","givenDate","isWithinAdvancePeriod","advancePeriod","isPickupTimeWithinPolicy","pickupTime","weekDay","sixHoursInMillis","isDropTimeWithinPolicy","dropTime","fourHoursInMillis","className","children","fileName","_jsxFileName","lineNumber","columnNumber","numberOfWeeks","onWeekSelect","map","each","onClick","employee_name","index","schedules","forEach","schedule","dayName","weekday","onChange","idx","type","readOnly","isOpen","onClose","text","_c","$RefreshReg$"],"sources":["C:/Users/annavarapu.7/Transport-frontend/src/Pages/Schedules/SelfEmployeeSchedules.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport Popup from '../../Components/Model';\r\nimport Button from '../../Components/Button';\r\nimport Toast from '../../Components/Toast';\r\nimport WeekRangePicker from '../../Components/WeekRangePicker';\r\nimport Cookies from 'js-cookie';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { jwtDecode } from 'jwt-decode';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport ApiComponent from '../../Components/API';\r\nimport { MdEdit, MdOutlineDeleteOutline } from 'react-icons/md';\r\n\r\nconst EmployeeSchedules = () => {\r\n  const navigate = useNavigate()\r\n  const { warn, info, error, success } = Toast();\r\n  const [isPopupOpen, setIsPopupOpen] = useState(false);\r\n  const [apiProps, setApiProps] = useState(null);\r\n  const [spocschedules, setSpocschedules] = useState([]);\r\n  const [pickupTimings, setPickupTimings] = useState([]);\r\n  const [dropTimings, setDropTimings] = useState([]);\r\n  const [selectedWeek, setSelectedWeek] = useState('');\r\n  const [weekDays, setWeekDays] = useState([]);\r\n  const [editingPickup, setEditingPickup] = useState(null);\r\n  const [editingDrop, setEditingDrop] = useState(null);\r\n  const [userDetails, setUserDetails] = useState({});\r\n\r\n  \r\n\r\n\r\n  useEffect(() => {\r\n    const token = Cookies.get('jwt_token');\r\n    if (token) {\r\n      const decodedToken = jwtDecode(token);\r\n      setUserDetails(decodedToken.sub);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (userDetails.employee_id) {\r\n      if (spocschedules.length === 0) {\r\n        setApiProps({\r\n          method: 'GET',\r\n          url: `api/get/employee-schedules/self/${userDetails.employee_id}`,\r\n          render: (response) => {\r\n            if (response.data) {\r\n              setSpocschedules(response.data);\r\n            }\r\n          }\r\n        });\r\n      }\r\n      if (pickupTimings.length === 0) {\r\n        setApiProps({\r\n          method: 'GET',\r\n          url: 'api/employees/available/pickup-schedules/all',\r\n          render: (response) => {\r\n            if (response.data) {\r\n              setPickupTimings(response.data);\r\n            }\r\n          }\r\n        });\r\n      }\r\n      if (dropTimings.length === 0) {\r\n        setApiProps({\r\n          method: 'GET',\r\n          url: 'api/employees/available/drop-schedules/all',\r\n          render: (response) => {\r\n            if (response.data) {\r\n              setDropTimings(response.data);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }, [userDetails, spocschedules, pickupTimings, dropTimings]);\r\n\r\n\r\n\r\n  const handleWeekSelect = (weekRange) => {\r\n    setSelectedWeek(weekRange);\r\n    const [start, end] = weekRange.split(' - ');\r\n    const startDate = new Date(start.split('-').reverse().join('-')); // Convert dd-mm-yyyy to yyyy-mm-dd\r\n    const days = [];\r\n    for (let i = 0; i < 7; i++) {\r\n      const day = new Date(startDate);\r\n      day.setDate(day.getDate() + i);\r\n      days.push(day.toLocaleDateString('en-GB')); // Use en-GB for dd/mm/yyyy format\r\n    }\r\n    setWeekDays(days);\r\n  };\r\n\r\n  const handleEditPickup = (employeeId, day) => {\r\n    const eligiblePickupTimings = getEligiblePickupTimings(day);\r\n    if (eligiblePickupTimings.length === 0) {\r\n      warn('No eligible pickup timings available.');\r\n      return;\r\n    }\r\n    setEditingPickup({ employeeId, day, eligiblePickupTimings, selectedPickupIdx: 0 });\r\n  };\r\n\r\n  const handleEditDrop = (employeeId, day) => {\r\n    const eligibleDropTimings = getEligibleDropTimings(day);\r\n    if (eligibleDropTimings.length === 0) {\r\n      warn('No eligible drop timings available.');\r\n      return;\r\n    }\r\n    setEditingDrop({ employeeId, day, eligibleDropTimings, selectedDropIdx: 0 });\r\n  };\r\n\r\n  const handleDeletePickupApiResponse = (response) => {\r\n    if (response.status === 200 || response.status === 201) {\r\n      info(response.data.message);\r\n      setEditingPickup(editingPickup)\r\n      setApiProps({\r\n        method: 'GET',\r\n        url: `api/get/employee-schedules/self/${userDetails.employee_id}`,\r\n        render: (response) => {\r\n          if (response.data) {\r\n            setSpocschedules(response.data);\r\n          }\r\n        }\r\n      });\r\n    } else if (response.status === 409) {\r\n      error(response.data.message);\r\n    } else {\r\n      console.error('An unexpected error occurred');\r\n    }\r\n  }\r\n\r\n  const handlePickupDelete = useCallback((employeeId, day) => {\r\n    const dateParts = day.split('/');\r\n    const dayVal = parseInt(dateParts[0], 10);\r\n    const monthVal = parseInt(dateParts[1], 10) - 1; // Months are 0-indexed\r\n    const yearVal = parseInt(dateParts[2], 10);\r\n\r\n    const currentDateTime = new Date();\r\n\r\n    const hasFuturePickup = pickupTimings.some(timing => {\r\n      const [hours, minutes, seconds = '00'] = timing.pickup_time.split(':');\r\n      const pickupDateTime = new Date(\r\n        yearVal,\r\n        monthVal,\r\n        dayVal,\r\n        parseInt(hours, 10),\r\n        parseInt(minutes, 10),\r\n        parseInt(seconds, 10)\r\n      );\r\n\r\n      return pickupDateTime - currentDateTime >= 6 * 60 * 60 * 1000;\r\n    });\r\n\r\n    if (!hasFuturePickup) {\r\n      warn('No selected pickup timings available for deletion.');\r\n      return;\r\n    }\r\n    const formattedDate = `${yearVal}-${String(monthVal + 1).padStart(2, '0')}-${String(dayVal).padStart(2, '0')}`;\r\n\r\n    setApiProps({\r\n      method: 'DELETE',\r\n      url: `api/employee/pickup-schedule/delete/${employeeId}/${formattedDate}`,\r\n      render: handleDeletePickupApiResponse,\r\n    });\r\n\r\n  }, [pickupTimings]);\r\n\r\n\r\n  const handleDeleteDropApiResponse = (response) => {\r\n    if (response.status === 200 || response.status === 201) {\r\n      info(response.data.message);\r\n      setEditingDrop(editingDrop)\r\n      setApiProps({\r\n        method: 'GET',\r\n        url: `api/get/employee-schedules/self/${userDetails.employee_id}`,\r\n        render: (response) => {\r\n          if (response.data) {\r\n            setSpocschedules(response.data);\r\n          }\r\n        }\r\n      });\r\n    } else if (response.status === 409) {\r\n      error(response.data.message);\r\n    } else {\r\n      console.error('An unexpected error occurred');\r\n    }\r\n  }\r\n\r\n\r\n  const handleDropDelete = useCallback((employeeId, day) => {\r\n    const dateParts = day.split('/');\r\n    const dayVal = parseInt(dateParts[0], 10);\r\n    const monthVal = parseInt(dateParts[1], 10) - 1; // JS months are 0-based\r\n    const yearVal = parseInt(dateParts[2], 10);\r\n\r\n    const currentDateTime = new Date();\r\n\r\n    const hasFutureDrop = dropTimings.some(timing => {\r\n      const [hours, minutes, seconds = '00'] = timing.drop_time.split(':');\r\n      const dropDateTime = new Date(yearVal, monthVal, dayVal, parseInt(hours), parseInt(minutes), parseInt(seconds));\r\n\r\n      return dropDateTime - currentDateTime >= 4 * 60 * 60 * 1000;;\r\n    });\r\n\r\n    if (!hasFutureDrop) {\r\n      warn('No selected drop timings available for deletion.');\r\n      return;\r\n    }\r\n\r\n    const formattedDate = `${yearVal}-${String(monthVal + 1).padStart(2, '0')}-${String(dayVal).padStart(2, '0')}`;\r\n\r\n    setApiProps({\r\n      method: 'DELETE',\r\n      url: `api/employee/drop-schedule/delete/${employeeId}/${formattedDate}`,\r\n      render: handleDeleteDropApiResponse,\r\n    });\r\n\r\n  }, [dropTimings]);\r\n\r\n  const handlePickupApiResponse = (response) => {\r\n    if (response.status === 200 || response.status === 201) {\r\n      success(response.data.message);\r\n      setEditingPickup(editingPickup)\r\n      setApiProps({\r\n        method: 'GET',\r\n        url: `api/get/employee-schedules/self/${userDetails.employee_id}`,\r\n        render: (response) => {\r\n          if (response.data) {\r\n            setSpocschedules(response.data);\r\n          }\r\n        }\r\n      });\r\n    } else if (response.status === 409) {\r\n      error(response.data.message);\r\n    } else {\r\n      console.error('An unexpected error occurred');\r\n    }\r\n  };\r\n\r\n  const handlePickupChange = useCallback((event, employeeId, day) => {\r\n    const newDate = new Date(day.split('/').reverse().join('-'));\r\n    const currentDateTime = new Date();\r\n\r\n    const eligiblePickupTimings = pickupTimings.filter(timing => {\r\n      const pickupDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${timing.pickup_time}`);\r\n      return pickupDateTime - currentDateTime >= 6 * 60 * 60 * 1000;\r\n    });\r\n\r\n    const pickup = eligiblePickupTimings[event.target.value]?.pickup_time;\r\n\r\n    if (!pickup) return;\r\n\r\n    const pickupDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${pickup}`);\r\n\r\n    if (pickupDateTime - currentDateTime < 6 * 60 * 60 * 1000) {\r\n      warn('Pickup requests must be made at least 6 hours in advance.');\r\n      setEditingPickup(editingPickup);\r\n      return;\r\n    }\r\n\r\n\r\n    setApiProps({\r\n      method: 'POST',\r\n      url: 'api/create/employee/pickup-schedules',\r\n      postData: {\r\n        employee_id: employeeId,\r\n        shift_date: newDate.toISOString().split('T')[0],\r\n        pickup_time: pickup,\r\n        drop_time: null,\r\n        trip_status: 'Conform',\r\n      },\r\n      render: handlePickupApiResponse,\r\n    });\r\n  }, [pickupTimings]);\r\n\r\n  const handleDropApiResponse = (response) => {\r\n    if (response.status === 200 || response.status === 201) {\r\n      success(response.data.message);\r\n      setEditingDrop(editingDrop)\r\n      setApiProps({\r\n        method: 'GET',\r\n        url: `api/get/employee-schedules/self/${userDetails.employee_id}`,\r\n        render: (response) => {\r\n          if (response.data) {\r\n            setSpocschedules(response.data);\r\n          }\r\n        }\r\n      });\r\n    } else if (response.status === 409) {\r\n      error(response.data.message);\r\n    } else {\r\n      console.error('An unexpected error occurred');\r\n    }\r\n  };\r\n\r\n  const handleDropChange = useCallback((event, employeeId, day) => {\r\n\r\n    const newDate = new Date(day.split('/').reverse().join('-'));\r\n    const currentDateTime = new Date();\r\n\r\n    // Filter eligible drop timings\r\n    const eligibleDropTimings = dropTimings.filter(timing => {\r\n      const dropDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${timing.drop_time}`);\r\n      return dropDateTime - currentDateTime >= 4 * 60 * 60 * 1000;\r\n    });\r\n\r\n    const drop = eligibleDropTimings[event.target.value]?.drop_time;\r\n\r\n    if (!drop) return;\r\n\r\n    const dropDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${drop}`);\r\n\r\n    if (dropDateTime - currentDateTime < 4 * 60 * 60 * 1000) {\r\n      warn('Drop requests must be made at least 4 hours in advance.');\r\n      return;\r\n    }\r\n\r\n    setApiProps({\r\n      method: 'POST',\r\n      url: 'api/create/employee/drop-schedules',\r\n      postData: {\r\n        employee_id: employeeId,\r\n        shift_date: newDate.toISOString().split('T')[0],\r\n        pickup_time: null,\r\n        drop_time: drop,\r\n        trip_status: 'Conform',\r\n      },\r\n      render: handleDropApiResponse,\r\n    });\r\n  }, [dropTimings]);\r\n\r\n  const getEligiblePickupTimings = (day) => {\r\n    const currentDateTime = new Date();\r\n    return pickupTimings.filter(timing => {\r\n      const pickupDateTime = new Date(`${day.split('/').reverse().join('-')}T${timing.pickup_time}`);\r\n      return pickupDateTime - currentDateTime >= 6 * 60 * 60 * 1000;\r\n    });\r\n  };\r\n\r\n  const getEligibleDropTimings = (day) => {\r\n    const currentDateTime = new Date();\r\n    return dropTimings.filter(timing => {\r\n      const dropDateTime = new Date(`${day.split('/').reverse().join('-')}T${timing.drop_time}`);\r\n      return dropDateTime - currentDateTime >= 4 * 60 * 60 * 1000;\r\n    });\r\n  };\r\n\r\n  const isPastDate = (date) => {\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0); // Set the time to midnight\r\n\r\n    const givenDate = new Date(date.split('/').reverse().join('-'));\r\n    givenDate.setHours(0, 0, 0, 0); // Set the time to midnight   \r\n\r\n    return givenDate < today;\r\n  };\r\n\r\n  const isWithinAdvancePeriod = (date) => {\r\n    const today = new Date();\r\n    const givenDate = new Date(date.split('/').reverse().join('-'));\r\n    const advancePeriod = 15 * 24 * 60 * 60 * 1000; // 15 days in milliseconds\r\n    return givenDate - today <= advancePeriod;\r\n  };\r\n\r\n  const isPickupTimeWithinPolicy = (pickupTime, weekDay) => {\r\n    if (!pickupTime || pickupTime === ' -- : --') return true; // Allow if no pickup time\r\n\r\n    const currentDateTime = new Date();\r\n    const dateParts = weekDay.split('/');\r\n    const pickupDateTime = new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}T${pickupTime}`);\r\n\r\n    // Check if the pickup time is at least 6 hours from now\r\n    const sixHoursInMillis = 6 * 60 * 60 * 1000;\r\n    return (pickupDateTime - currentDateTime) >= sixHoursInMillis;\r\n  };\r\n\r\n  const isDropTimeWithinPolicy = (dropTime, weekDay) => {\r\n    if (!dropTime || dropTime === ' -- : --') return true; // Allow if no pickup time\r\n\r\n    const currentDateTime = new Date();\r\n    const dateParts = weekDay.split('/');\r\n    const dropDateTime = new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}T${dropTime}`);\r\n\r\n    // Check if the pickup time is at least 6 hours from now\r\n    const fourHoursInMillis = 4 * 60 * 60 * 1000;\r\n    return (dropDateTime - currentDateTime) >= fourHoursInMillis;\r\n  }\r\n\r\n  return (\r\n    <form className='Spoc-main-menu'>\r\n      {apiProps && <ApiComponent {...apiProps} />}\r\n      <div className='action-buttons-container'>\r\n        <WeekRangePicker numberOfWeeks={7} onWeekSelect={handleWeekSelect} />\r\n        {/* <input type=\"text\" placeholder=\"Search...\" className='search-input' /> */}\r\n        {/* <div>\r\n          <Button type='button' className='primary-button' text='Upload' />\r\n        </div> */}\r\n      </div>\r\n      <div className='spoc-schedules-list'>\r\n        <ul>\r\n          {spocschedules.map((each) => (\r\n            <li key={each.employee_id}>\r\n              <h4>\r\n                <span className='employee-name' onClick={()=> navigate(`/Employee/Details/${each.employee_id}`)}>{each.employee_name}</span> - <span className='employee-id'>{each.employee_id}</span>\r\n              </h4>\r\n              <div className='employee-week-schedule'>\r\n                {weekDays.map((weekDay, index) => {\r\n                  let pickup = ' -- : --';\r\n                  let drop = ' -- : --';\r\n\r\n                  // Ensure correct date format\r\n                  const dateParts = weekDay.split('/');\r\n                  const date = new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}`);\r\n                  const formattedDate = date.toISOString().split('T')[0];\r\n\r\n                  each.schedules.forEach((schedule) => {\r\n                    if (schedule.shift_date === formattedDate) {\r\n                      pickup = schedule.pickup_time ? schedule.pickup_time : ' -- : --';\r\n                      drop = schedule.drop_time ? schedule.drop_time : ' -- : --';\r\n                    }\r\n                  });\r\n\r\n                  const dayName = date.toLocaleDateString('en-US', { weekday: 'short' });\r\n\r\n                  return (\r\n                    <div key={index} className='day-schedule'>\r\n                      <strong>{dayName} ({weekDay})</strong>\r\n                      <div>\r\n                        <label>Pickup:</label>\r\n                        {editingPickup && editingPickup.employeeId === each.employee_id && editingPickup.day === weekDay ? (\r\n                          <select\r\n                            onChange={(event) => handlePickupChange(event, each.employee_id, weekDay)}\r\n                          >\r\n                            <option>Select</option>\r\n                            {editingPickup.eligiblePickupTimings.map((timing, idx) => (\r\n                              <option key={idx} value={idx}>{timing.pickup_time}</option>\r\n                            ))}\r\n                          </select>\r\n                        ) : (\r\n                          <input type=\"text\" value={pickup} readOnly className='time-class' />\r\n                        )}\r\n                        {!isPastDate(weekDay) && isWithinAdvancePeriod(weekDay) && isPickupTimeWithinPolicy(pickup, weekDay) && (\r\n                          <>\r\n                            <MdEdit className='edit-icon' onClick={() => handleEditPickup(each.employee_id, weekDay)} />\r\n                            <MdOutlineDeleteOutline className='delete-icon' onClick={() => handlePickupDelete(each.employee_id, weekDay)} />\r\n                          </>\r\n                        )}\r\n                      </div>\r\n                      <div>\r\n                        <label>Drop:</label>\r\n                        {editingDrop && editingDrop.employeeId === each.employee_id && editingDrop.day === weekDay ? (\r\n                          <select onChange={(event) => handleDropChange(event, each.employee_id, weekDay)}\r\n                          >\r\n                            <option>Select</option>\r\n                            {editingDrop.eligibleDropTimings.map((timing, idx) => (\r\n                              <option key={idx} value={idx}>{timing.drop_time}</option>\r\n                            ))}\r\n                          </select>\r\n                        ) : (\r\n                          <input type=\"text\" value={drop} readOnly className='time-class' />\r\n                        )}\r\n                        {!isPastDate(weekDay) && isWithinAdvancePeriod(weekDay) && isDropTimeWithinPolicy(drop, weekDay) && (\r\n                          <>\r\n                            <MdEdit className='edit-icon' onClick={() => handleEditDrop(each.employee_id, weekDay)} />\r\n                            <MdOutlineDeleteOutline className='delete-icon' onClick={() => handleDropDelete(each.employee_id, weekDay)} />\r\n                          </>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n      <Popup isOpen={isPopupOpen} onClose={() => setIsPopupOpen(false)}>\r\n        <h4>Select a file format for all invoices</h4>\r\n        <div className='status-buttons'>\r\n          <Button type='button' className='primary-button' text='Ok' />\r\n          <Button type='button' className='primary-button' text='Cancel' onClick={() => setIsPopupOpen(false)} />\r\n        </div>\r\n      </Popup>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default EmployeeSchedules;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}