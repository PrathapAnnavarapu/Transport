{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\annavarapu.7\\\\Transport-frontend\\\\src\\\\Pages\\\\Schedules\\\\SPOC-Schedules.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport Popup from '../../Components/Model';\nimport Button from '../../Components/Button';\nimport Toast from '../../Components/Toast';\nimport WeekRangePicker from '../../Components/WeekRangePicker';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { useNavigate } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport ApiComponent from '../../Components/API';\nimport { MdEdit, MdOutlineDeleteOutline } from 'react-icons/md';\nimport { jwtDecode } from 'jwt-decode';\nimport Cookies from 'js-cookie';\nimport Loader from '../../Components/Loader';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SPOCSchedules = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    warn,\n    info,\n    error,\n    success\n  } = Toast();\n  const [isPopupOpen, setIsPopupOpen] = useState(false);\n  const [inputValue, setInputValue] = useState('');\n  const [apiProps, setApiProps] = useState(null);\n  const [spocschedules, setSpocschedules] = useState([]);\n  const [pickupTimings, setPickupTimings] = useState([]);\n  const [dropTimings, setDropTimings] = useState([]);\n  const [selectedWeek, setSelectedWeek] = useState('');\n  const [weekDays, setWeekDays] = useState([]);\n  const [userDetails, setUserDetails] = useState({});\n  const [editingPickup, setEditingPickup] = useState(null);\n  const [editingDrop, setEditingDrop] = useState(null);\n  const [visibleItems, setVisibleItems] = useState([]);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [hasMore, setHasMore] = useState(true);\n  const [file, setFile] = useState(null);\n  const handleFileChange = event => {\n    const file = event.target.files[0];\n    if (file) {\n      setFile(file);\n    }\n  };\n  const handleUpload = async () => {\n    if (!file) {\n      error('Please select a file');\n      return;\n    }\n    // Check if the file is Excel or CSV\n    const validFileTypes = ['application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'text/csv'];\n    if (!validFileTypes.includes(file.type)) {\n      error('Please upload a valid Excel (.xls, .xlsx) or CSV file');\n      return;\n    }\n    const formData = new FormData();\n    formData.append('file', file);\n\n    // Set API Props for file upload using setApiProps\n    setApiProps({\n      method: 'POST',\n      url: 'api/upload/schedules/matrix',\n      // Endpoint for file upload\n      postData: formData,\n      render: response => {\n        setIsPopupOpen(false);\n        fetchSchedules();\n        success(response.data.message || 'File uploaded successfully');\n      },\n      catchError: error => {\n        var _error$response, _error$response$data;\n        error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Upload failed');\n      }\n    });\n  };\n  useEffect(() => {\n    const token = Cookies.get('jwt_token');\n    if (token) {\n      const decodedToken = jwtDecode(token);\n      setUserDetails(decodedToken.sub);\n    }\n  }, []);\n  const fetchLazySchedules = spocData => {\n    setLoadingMore(true); // Start loader\n\n    const visibleCount = visibleItems.length;\n    const nextItems = spocData.slice(visibleCount, visibleCount + 10);\n    if (nextItems.length > 0) {\n      setVisibleItems(prev => [...prev, ...nextItems]);\n    } else {\n      setHasMore(false);\n    }\n    setLoadingMore(false); // Stop loader\n  };\n  const fetchSchedules = () => {\n    return new Promise((resolve, reject) => {\n      setApiProps({\n        method: 'GET',\n        url: 'api/get/employee-schedules/all',\n        render: response => {\n          if (response.data) {\n            setSpocschedules(response.data);\n            setVisibleItems([]);\n            setHasMore(true);\n            fetchLazySchedules(response.data);\n            resolve(response.data);\n          } else {\n            reject(new Error('Failed to load schedules'));\n          }\n        }\n      });\n    });\n  };\n  useEffect(() => {\n    // Fetch schedules if not already loaded\n    if (spocschedules.length === 0) {\n      fetchSchedules();\n    }\n    if (pickupTimings.length === 0) {\n      setApiProps({\n        method: 'GET',\n        url: 'api/employees/available/pickup-schedules/all',\n        render: response => {\n          if (response.data) {\n            setPickupTimings(response.data);\n          }\n        }\n      });\n    }\n    if (dropTimings.length === 0) {\n      setApiProps({\n        method: 'GET',\n        url: 'api/employees/available/drop-schedules/all',\n        render: response => {\n          if (response.data) {\n            setDropTimings(response.data);\n          }\n        }\n      });\n    }\n  }, [spocschedules, pickupTimings, dropTimings]);\n  const handleWeekSelect = weekRange => {\n    setSelectedWeek(weekRange);\n    const [start, end] = weekRange.split(' - ');\n    const startDate = new Date(start.split('-').reverse().join('-')); // Convert dd-mm-yyyy to yyyy-mm-dd\n    const days = [];\n    for (let i = 0; i < 7; i++) {\n      const day = new Date(startDate);\n      day.setDate(day.getDate() + i);\n      days.push(day.toLocaleDateString('en-GB')); // Use en-GB for dd/mm/yyyy format\n    }\n    setWeekDays(days);\n  };\n  const handleEditPickup = (employeeId, day) => {\n    const eligiblePickupTimings = getEligiblePickupTimings(day);\n    if (eligiblePickupTimings.length === 0) {\n      warn('No eligible pickup timings available.');\n      return;\n    }\n    setEditingPickup({\n      employeeId,\n      day,\n      eligiblePickupTimings,\n      selectedPickupIdx: 0\n    });\n  };\n  const handleEditDrop = (employeeId, day) => {\n    const eligibleDropTimings = getEligibleDropTimings(day);\n    if (eligibleDropTimings.length === 0) {\n      warn('No eligible drop timings available.');\n      return;\n    }\n    setEditingDrop({\n      employeeId,\n      day,\n      eligibleDropTimings,\n      selectedDropIdx: 0\n    });\n  };\n  const handleDeletePickupApiResponse = response => {\n    if (response.status === 200 || response.status === 201) {\n      info(response.data.message);\n      setEditingPickup(editingPickup);\n      setApiProps({\n        method: 'GET',\n        url: 'api/get/employee-schedules/all',\n        render: response => {\n          if (response.data) {\n            setSpocschedules(response.data);\n          }\n        }\n      });\n    } else if (response.status === 409) {\n      error(response.data.message);\n    } else {\n      console.error('An unexpected error occurred');\n    }\n  };\n  const handlePickupDelete = useCallback((employeeId, day) => {\n    const dateParts = day.split('/');\n    const dayVal = parseInt(dateParts[0], 10);\n    const monthVal = parseInt(dateParts[1], 10) - 1; // Months are 0-indexed\n    const yearVal = parseInt(dateParts[2], 10);\n    const currentDateTime = new Date();\n    const hasFuturePickup = pickupTimings.some(timing => {\n      const [hours, minutes, seconds = '00'] = timing.pickup_time.split(':');\n      const pickupDateTime = new Date(yearVal, monthVal, dayVal, parseInt(hours, 10), parseInt(minutes, 10), parseInt(seconds, 10));\n      return pickupDateTime - currentDateTime >= 6 * 60 * 60 * 1000;\n    });\n    if (!hasFuturePickup) {\n      warn('No selected pickup timings available for deletion.');\n      return;\n    }\n    const formattedDate = `${yearVal}-${String(monthVal + 1).padStart(2, '0')}-${String(dayVal).padStart(2, '0')}`;\n    setApiProps({\n      method: 'DELETE',\n      url: `api/employee/pickup-schedule/delete/${employeeId}/${formattedDate}`,\n      render: handleDeletePickupApiResponse\n    });\n  }, [pickupTimings]);\n  const handleDeleteDropApiResponse = response => {\n    if (response.status === 200 || response.status === 201) {\n      info(response.data.message);\n      setEditingDrop(editingDrop);\n      setApiProps({\n        method: 'GET',\n        url: 'api/get/employee-schedules/all',\n        render: response => {\n          if (response.data) {\n            setSpocschedules(response.data);\n          }\n        }\n      });\n    } else if (response.status === 409) {\n      error(response.data.message);\n    } else {\n      console.error('An unexpected error occurred');\n    }\n  };\n  const handleDropDelete = useCallback((employeeId, day) => {\n    const dateParts = day.split('/');\n    const dayVal = parseInt(dateParts[0], 10);\n    const monthVal = parseInt(dateParts[1], 10) - 1; // JS months are 0-based\n    const yearVal = parseInt(dateParts[2], 10);\n    const currentDateTime = new Date();\n    const hasFutureDrop = dropTimings.some(timing => {\n      const [hours, minutes, seconds = '00'] = timing.drop_time.split(':');\n      const dropDateTime = new Date(yearVal, monthVal, dayVal, parseInt(hours), parseInt(minutes), parseInt(seconds));\n      return dropDateTime - currentDateTime >= 4 * 60 * 60 * 1000;\n      ;\n    });\n    if (!hasFutureDrop) {\n      warn('No selected drop timings available for deletion.');\n      return;\n    }\n    const formattedDate = `${yearVal}-${String(monthVal + 1).padStart(2, '0')}-${String(dayVal).padStart(2, '0')}`;\n    setApiProps({\n      method: 'DELETE',\n      url: `api/employee/drop-schedule/delete/${employeeId}/${formattedDate}`,\n      render: handleDeleteDropApiResponse\n    });\n  }, [dropTimings]);\n  const handlePickupApiResponse = response => {\n    if (response.status === 200 || response.status === 201) {\n      success(response.data.message);\n      setEditingPickup(editingPickup);\n      setApiProps({\n        method: 'GET',\n        url: 'api/get/employee-schedules/all',\n        render: response => {\n          if (response.data) {\n            setSpocschedules(response.data);\n          }\n        }\n      });\n    } else if (response.status === 409) {\n      error(response.data.message);\n    } else {\n      console.error('An unexpected error occurred');\n    }\n  };\n  const handlePickupChange = useCallback((event, employeeId, day) => {\n    var _eligiblePickupTiming;\n    const newDate = new Date(day.split('/').reverse().join('-'));\n    const currentDateTime = new Date();\n    const eligiblePickupTimings = pickupTimings.filter(timing => {\n      const pickupDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${timing.pickup_time}`);\n      return pickupDateTime - currentDateTime >= 6 * 60 * 60 * 1000;\n    });\n    const pickup = (_eligiblePickupTiming = eligiblePickupTimings[event.target.value]) === null || _eligiblePickupTiming === void 0 ? void 0 : _eligiblePickupTiming.pickup_time;\n    if (!pickup) return;\n    const pickupDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${pickup}`);\n    if (pickupDateTime - currentDateTime < 6 * 60 * 60 * 1000) {\n      warn('Pickup requests must be made at least 6 hours in advance.');\n      setEditingPickup(editingPickup);\n      return;\n    }\n    setApiProps({\n      method: 'POST',\n      url: 'api/create/employee/pickup-schedules',\n      postData: {\n        employee_id: employeeId,\n        shift_date: newDate.toISOString().split('T')[0],\n        pickup_time: pickup,\n        drop_time: null,\n        trip_status: 'Conform'\n      },\n      render: handlePickupApiResponse\n    });\n  }, [pickupTimings]);\n  const handleDropApiResponse = response => {\n    if (response.status === 200 || response.status === 201) {\n      success(response.data.message);\n      setEditingDrop(editingDrop);\n      setApiProps({\n        method: 'GET',\n        url: 'api/get/employee-schedules/all',\n        render: response => {\n          if (response.data) {\n            setSpocschedules(response.data);\n          }\n        }\n      });\n    } else if (response.status === 409) {\n      error(response.data.message);\n    } else {\n      console.error('An unexpected error occurred');\n    }\n  };\n  const handleDropChange = useCallback((event, employeeId, day) => {\n    var _eligibleDropTimings$;\n    const newDate = new Date(day.split('/').reverse().join('-'));\n    const currentDateTime = new Date();\n\n    // Filter eligible drop timings\n    const eligibleDropTimings = dropTimings.filter(timing => {\n      const dropDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${timing.drop_time}`);\n      return dropDateTime - currentDateTime >= 4 * 60 * 60 * 1000;\n    });\n    const drop = (_eligibleDropTimings$ = eligibleDropTimings[event.target.value]) === null || _eligibleDropTimings$ === void 0 ? void 0 : _eligibleDropTimings$.drop_time;\n    if (!drop) return;\n    const dropDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${drop}`);\n    if (dropDateTime - currentDateTime < 4 * 60 * 60 * 1000) {\n      warn('Drop requests must be made at least 4 hours in advance.');\n      return;\n    }\n    setApiProps({\n      method: 'POST',\n      url: 'api/create/employee/drop-schedules',\n      postData: {\n        employee_id: employeeId,\n        shift_date: newDate.toISOString().split('T')[0],\n        pickup_time: null,\n        drop_time: drop,\n        trip_status: 'Conform'\n      },\n      render: handleDropApiResponse\n    });\n  }, [dropTimings]);\n  const getEligiblePickupTimings = day => {\n    const currentDateTime = new Date();\n    return pickupTimings.filter(timing => {\n      const pickupDateTime = new Date(`${day.split('/').reverse().join('-')}T${timing.pickup_time}`);\n      return pickupDateTime - currentDateTime >= 6 * 60 * 60 * 1000;\n    });\n  };\n  const getEligibleDropTimings = day => {\n    const currentDateTime = new Date();\n    return dropTimings.filter(timing => {\n      const dropDateTime = new Date(`${day.split('/').reverse().join('-')}T${timing.drop_time}`);\n      return dropDateTime - currentDateTime >= 4 * 60 * 60 * 1000;\n    });\n  };\n  const isPastDate = date => {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0); // Set the time to midnight\n\n    const givenDate = new Date(date.split('/').reverse().join('-'));\n    givenDate.setHours(0, 0, 0, 0); // Set the time to midnight   \n\n    return givenDate < today;\n  };\n  const isWithinAdvancePeriod = date => {\n    const today = new Date();\n    const givenDate = new Date(date.split('/').reverse().join('-'));\n    const advancePeriod = 15 * 24 * 60 * 60 * 1000; // 15 days in milliseconds\n    return givenDate - today <= advancePeriod;\n  };\n  const isPickupTimeWithinPolicy = (pickupTime, weekDay) => {\n    if (!pickupTime || pickupTime === ' -- : --') return true; // Allow if no pickup time\n\n    const currentDateTime = new Date();\n    const dateParts = weekDay.split('/');\n    const pickupDateTime = new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}T${pickupTime}`);\n\n    // Check if the pickup time is at least 6 hours from now\n    const sixHoursInMillis = 6 * 60 * 60 * 1000;\n    return pickupDateTime - currentDateTime >= sixHoursInMillis;\n  };\n  const isDropTimeWithinPolicy = (dropTime, weekDay) => {\n    if (!dropTime || dropTime === ' -- : --') return true; // Allow if no pickup time\n\n    const currentDateTime = new Date();\n    const dateParts = weekDay.split('/');\n    const dropDateTime = new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}T${dropTime}`);\n\n    // Check if the pickup time is at least 6 hours from now\n    const fourHoursInMillis = 4 * 60 * 60 * 1000;\n    return dropDateTime - currentDateTime >= fourHoursInMillis;\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"Spoc-main-menu\",\n    children: [apiProps && /*#__PURE__*/_jsxDEV(ApiComponent, {\n      ...apiProps\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"action-buttons-container\",\n      children: [/*#__PURE__*/_jsxDEV(WeekRangePicker, {\n        numberOfWeeks: 7,\n        onWeekSelect: handleWeekSelect\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search...\",\n        className: \"search-input\",\n        onChange: e => setInputValue(e.target.value),\n        value: inputValue\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spoc-infinte-scroll-containers\",\n      children: /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n        dataLength: visibleItems.length,\n        pullDownToRefreshThreshold: 50,\n        next: () => fetchLazySchedules(spocschedules),\n        hasMore: hasMore,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spoc-schedules-list\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: spocschedules.map(each => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"employee-name\",\n                  onClick: () => navigate(`/Employee/Details/${each.employee_id}`),\n                  children: each.employee_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 17\n                }, this), \" - \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"employee-id\",\n                  children: each.employee_id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 144\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"employee-week-schedule\",\n                children: weekDays.map((weekDay, index) => {\n                  let pickup = ' -- : --';\n                  let drop = ' -- : --';\n\n                  // Ensure correct date format\n                  const dateParts = weekDay.split('/');\n                  const date = new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}`);\n                  const formattedDate = date.toISOString().split('T')[0];\n                  each.schedules.forEach(schedule => {\n                    if (schedule.shift_date === formattedDate) {\n                      pickup = schedule.pickup_time ? schedule.pickup_time : ' -- : --';\n                      drop = schedule.drop_time ? schedule.drop_time : ' -- : --';\n                    }\n                  });\n                  const dayName = date.toLocaleDateString('en-US', {\n                    weekday: 'short'\n                  });\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"day-schedule\",\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: [dayName, \" (\", weekDay, \")\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 506,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        children: \"Pickup:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 508,\n                        columnNumber: 25\n                      }, this), editingPickup && editingPickup.employeeId === each.employee_id && editingPickup.day === weekDay ? /*#__PURE__*/_jsxDEV(\"select\", {\n                        onChange: event => handlePickupChange(event, each.employee_id, weekDay),\n                        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                          children: \"Select\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 513,\n                          columnNumber: 29\n                        }, this), editingPickup.eligiblePickupTimings.map((timing, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: idx,\n                          children: timing.pickup_time\n                        }, idx, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 515,\n                          columnNumber: 31\n                        }, this))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 510,\n                        columnNumber: 27\n                      }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        value: pickup,\n                        readOnly: true,\n                        className: \"time-class\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 519,\n                        columnNumber: 27\n                      }, this), !isPastDate(weekDay) && isWithinAdvancePeriod(weekDay) && isPickupTimeWithinPolicy(pickup, weekDay) && /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(MdEdit, {\n                          className: \"edit-icon\",\n                          onClick: () => handleEditPickup(each.employee_id, weekDay)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 523,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(MdOutlineDeleteOutline, {\n                          className: \"delete-icon\",\n                          onClick: () => handlePickupDelete(each.employee_id, weekDay)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 524,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 507,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        children: \"Drop:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 529,\n                        columnNumber: 25\n                      }, this), editingDrop && editingDrop.employeeId === each.employee_id && editingDrop.day === weekDay ? /*#__PURE__*/_jsxDEV(\"select\", {\n                        onChange: event => handleDropChange(event, each.employee_id, weekDay),\n                        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                          children: \"Select\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 533,\n                          columnNumber: 29\n                        }, this), editingDrop.eligibleDropTimings.map((timing, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: idx,\n                          children: timing.drop_time\n                        }, idx, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 535,\n                          columnNumber: 31\n                        }, this))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 531,\n                        columnNumber: 27\n                      }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        value: drop,\n                        readOnly: true,\n                        className: \"time-class\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 539,\n                        columnNumber: 27\n                      }, this), !isPastDate(weekDay) && isWithinAdvancePeriod(weekDay) && isDropTimeWithinPolicy(drop, weekDay) && /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(MdEdit, {\n                          className: \"edit-icon\",\n                          onClick: () => handleEditDrop(each.employee_id, weekDay)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 543,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(MdOutlineDeleteOutline, {\n                          className: \"delete-icon\",\n                          onClick: () => handleDropDelete(each.employee_id, weekDay)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 544,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 528,\n                      columnNumber: 23\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 505,\n                    columnNumber: 21\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 15\n              }, this)]\n            }, each.employee_id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 13\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 6\n    }, this), /*#__PURE__*/_jsxDEV(Popup, {\n      isOpen: isPopupOpen,\n      onClose: () => setIsPopupOpen(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"operations-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \".xls,.xlsx,.csv\",\n            onChange: handleFileChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"button\",\n            text: \"upload\",\n            className: \"primary-button\",\n            onClick: handleUpload\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 562,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 558,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 467,\n    columnNumber: 5\n  }, this);\n};\n_s(SPOCSchedules, \"rJ8EZFHa8RzhpU9PQyNSDXTJRzo=\", false, function () {\n  return [useNavigate];\n});\n_c = SPOCSchedules;\nexport default SPOCSchedules;\nvar _c;\n$RefreshReg$(_c, \"SPOCSchedules\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Popup","Button","Toast","WeekRangePicker","InfiniteScroll","useNavigate","useSelector","useDispatch","ApiComponent","MdEdit","MdOutlineDeleteOutline","jwtDecode","Cookies","Loader","jsxDEV","_jsxDEV","Fragment","_Fragment","SPOCSchedules","_s","navigate","warn","info","error","success","isPopupOpen","setIsPopupOpen","inputValue","setInputValue","apiProps","setApiProps","spocschedules","setSpocschedules","pickupTimings","setPickupTimings","dropTimings","setDropTimings","selectedWeek","setSelectedWeek","weekDays","setWeekDays","userDetails","setUserDetails","editingPickup","setEditingPickup","editingDrop","setEditingDrop","visibleItems","setVisibleItems","loadingMore","setLoadingMore","hasMore","setHasMore","file","setFile","handleFileChange","event","target","files","handleUpload","validFileTypes","includes","type","formData","FormData","append","method","url","postData","render","response","fetchSchedules","data","message","catchError","_error$response","_error$response$data","token","get","decodedToken","sub","fetchLazySchedules","spocData","visibleCount","length","nextItems","slice","prev","Promise","resolve","reject","Error","handleWeekSelect","weekRange","start","end","split","startDate","Date","reverse","join","days","i","day","setDate","getDate","push","toLocaleDateString","handleEditPickup","employeeId","eligiblePickupTimings","getEligiblePickupTimings","selectedPickupIdx","handleEditDrop","eligibleDropTimings","getEligibleDropTimings","selectedDropIdx","handleDeletePickupApiResponse","status","console","handlePickupDelete","dateParts","dayVal","parseInt","monthVal","yearVal","currentDateTime","hasFuturePickup","some","timing","hours","minutes","seconds","pickup_time","pickupDateTime","formattedDate","String","padStart","handleDeleteDropApiResponse","handleDropDelete","hasFutureDrop","drop_time","dropDateTime","handlePickupApiResponse","handlePickupChange","_eligiblePickupTiming","newDate","filter","toISOString","pickup","value","employee_id","shift_date","trip_status","handleDropApiResponse","handleDropChange","_eligibleDropTimings$","drop","isPastDate","date","today","setHours","givenDate","isWithinAdvancePeriod","advancePeriod","isPickupTimeWithinPolicy","pickupTime","weekDay","sixHoursInMillis","isDropTimeWithinPolicy","dropTime","fourHoursInMillis","className","children","fileName","_jsxFileName","lineNumber","columnNumber","numberOfWeeks","onWeekSelect","placeholder","onChange","e","dataLength","pullDownToRefreshThreshold","next","map","each","onClick","employee_name","index","schedules","forEach","schedule","dayName","weekday","idx","readOnly","isOpen","onClose","accept","text","_c","$RefreshReg$"],"sources":["C:/Users/annavarapu.7/Transport-frontend/src/Pages/Schedules/SPOC-Schedules.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport Popup from '../../Components/Model';\r\nimport Button from '../../Components/Button';\r\nimport Toast from '../../Components/Toast';\r\nimport WeekRangePicker from '../../Components/WeekRangePicker';\r\nimport InfiniteScroll from 'react-infinite-scroll-component'\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport ApiComponent from '../../Components/API';\r\nimport { MdEdit, MdOutlineDeleteOutline } from 'react-icons/md';\r\nimport { jwtDecode } from 'jwt-decode';\r\nimport Cookies from 'js-cookie'\r\nimport Loader from '../../Components/Loader';\r\n\r\nconst SPOCSchedules = () => {\r\n const navigate = useNavigate()\r\n  const { warn, info, error, success } = Toast();\r\n  const [isPopupOpen, setIsPopupOpen] = useState(false);\r\n  const [inputValue, setInputValue] = useState('')\r\n  const [apiProps, setApiProps] = useState(null);\r\n  const [spocschedules, setSpocschedules] = useState([]);\r\n  const [pickupTimings, setPickupTimings] = useState([]);\r\n  const [dropTimings, setDropTimings] = useState([]);\r\n  const [selectedWeek, setSelectedWeek] = useState('');\r\n  const [weekDays, setWeekDays] = useState([]);\r\n  const [userDetails, setUserDetails] = useState({});\r\n  const [editingPickup, setEditingPickup] = useState(null);\r\n  const [editingDrop, setEditingDrop] = useState(null);\r\n  const [visibleItems, setVisibleItems] = useState([])\r\n  const [loadingMore, setLoadingMore] = useState(false);\r\n  const [hasMore, setHasMore] = useState(true)\r\n  const [file, setFile] = useState(null)\r\n  \r\n\r\n\r\nconst handleFileChange = (event) => {\r\n  const file = event.target.files[0];\r\n  if (file) {\r\n    setFile(file);\r\n  }\r\n};\r\n\r\n\r\nconst handleUpload = async () => {\r\n    if (!file) {\r\n      error('Please select a file');\r\n      return;\r\n    }\r\n    // Check if the file is Excel or CSV\r\n    const validFileTypes = [\r\n      'application/vnd.ms-excel',\r\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n      'text/csv'\r\n    ];\r\n\r\n    if (!validFileTypes.includes(file.type)) {\r\n      error('Please upload a valid Excel (.xls, .xlsx) or CSV file');\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    // Set API Props for file upload using setApiProps\r\n    setApiProps({\r\n      method: 'POST',\r\n      url: 'api/upload/schedules/matrix',  // Endpoint for file upload\r\n      postData: formData,\r\n      render: (response) => {\r\n        setIsPopupOpen(false);\r\n        fetchSchedules();\r\n        success(response.data.message || 'File uploaded successfully');\r\n      },\r\n      catchError: (error) => {\r\n        error(error.response?.data?.error || 'Upload failed');\r\n      },\r\n    });\r\n  };\r\n  \r\n    useEffect(() => {\r\n      const token = Cookies.get('jwt_token');\r\n      if (token) {\r\n        const decodedToken = jwtDecode(token);\r\n        setUserDetails(decodedToken.sub);\r\n      }\r\n    }, []);\r\n  \r\n  \r\n  \r\n    const fetchLazySchedules = (spocData) => {\r\n      setLoadingMore(true); // Start loader\r\n  \r\n      const visibleCount = visibleItems.length;\r\n      const nextItems = spocData.slice(visibleCount, visibleCount + 10);\r\n  \r\n      if (nextItems.length > 0) {\r\n        setVisibleItems(prev => [...prev, ...nextItems]);\r\n      } else {\r\n        setHasMore(false);\r\n      }\r\n      setLoadingMore(false); // Stop loader\r\n    };\r\n  \r\n  \r\n    const fetchSchedules = () => {\r\n      return new Promise((resolve, reject) => {\r\n        setApiProps({\r\n          method: 'GET',\r\n          url: 'api/get/employee-schedules/all',\r\n          render: (response) => {\r\n            if (response.data) {\r\n              setSpocschedules(response.data);\r\n              setVisibleItems([]);\r\n              setHasMore(true);\r\n              fetchLazySchedules(response.data);\r\n              resolve(response.data);\r\n            } else {\r\n              reject(new Error('Failed to load schedules'));\r\n            }\r\n          }\r\n        });\r\n      });\r\n    };\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    // Fetch schedules if not already loaded\r\n    if (spocschedules.length === 0) {\r\n      fetchSchedules()\r\n    }\r\n    if (pickupTimings.length === 0) {\r\n      setApiProps({\r\n        method: 'GET',\r\n        url: 'api/employees/available/pickup-schedules/all',\r\n        render: (response) => {\r\n          if (response.data) {\r\n            setPickupTimings(response.data);\r\n          }\r\n        }\r\n      });\r\n    }\r\n    if (dropTimings.length === 0) {\r\n      setApiProps({\r\n        method: 'GET',\r\n        url: 'api/employees/available/drop-schedules/all',\r\n        render: (response) => {\r\n          if (response.data) {\r\n            setDropTimings(response.data);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }, [spocschedules, pickupTimings, dropTimings]);\r\n\r\n  const handleWeekSelect = (weekRange) => {\r\n    setSelectedWeek(weekRange);\r\n    const [start, end] = weekRange.split(' - ');\r\n    const startDate = new Date(start.split('-').reverse().join('-')); // Convert dd-mm-yyyy to yyyy-mm-dd\r\n    const days = [];\r\n    for (let i = 0; i < 7; i++) {\r\n      const day = new Date(startDate);\r\n      day.setDate(day.getDate() + i);\r\n      days.push(day.toLocaleDateString('en-GB')); // Use en-GB for dd/mm/yyyy format\r\n    }\r\n    setWeekDays(days);\r\n  };\r\n\r\n  const handleEditPickup = (employeeId, day) => {\r\n    const eligiblePickupTimings = getEligiblePickupTimings(day);\r\n    if (eligiblePickupTimings.length === 0) {\r\n      warn('No eligible pickup timings available.');\r\n      return;\r\n    }\r\n    setEditingPickup({ employeeId, day, eligiblePickupTimings, selectedPickupIdx: 0 });\r\n  };\r\n\r\n  const handleEditDrop = (employeeId, day) => {\r\n    const eligibleDropTimings = getEligibleDropTimings(day);\r\n    if (eligibleDropTimings.length === 0) {\r\n      warn('No eligible drop timings available.');\r\n      return;\r\n    }\r\n    setEditingDrop({ employeeId, day, eligibleDropTimings, selectedDropIdx: 0 });\r\n  };\r\n\r\n  const handleDeletePickupApiResponse = (response) => {\r\n    if (response.status === 200 || response.status === 201) {\r\n      info(response.data.message);\r\n      setEditingPickup(editingPickup)\r\n      setApiProps({\r\n        method: 'GET',\r\n        url: 'api/get/employee-schedules/all',\r\n        render: (response) => {\r\n          if (response.data) {\r\n            setSpocschedules(response.data);\r\n          }\r\n        }\r\n      });\r\n    } else if (response.status === 409) {\r\n      error(response.data.message);\r\n    } else {\r\n      console.error('An unexpected error occurred');\r\n    }\r\n  }\r\n\r\n  const handlePickupDelete = useCallback((employeeId, day) => {\r\n      const dateParts = day.split('/');\r\n      const dayVal = parseInt(dateParts[0], 10);\r\n      const monthVal = parseInt(dateParts[1], 10) - 1; // Months are 0-indexed\r\n      const yearVal = parseInt(dateParts[2], 10);\r\n    \r\n      const currentDateTime = new Date();\r\n    \r\n      const hasFuturePickup = pickupTimings.some(timing => {\r\n        const [hours, minutes, seconds = '00'] = timing.pickup_time.split(':');\r\n        const pickupDateTime = new Date(\r\n          yearVal,\r\n          monthVal,\r\n          dayVal,\r\n          parseInt(hours, 10),\r\n          parseInt(minutes, 10),\r\n          parseInt(seconds, 10)\r\n        );  \r\n    \r\n        return pickupDateTime - currentDateTime >= 6 * 60 * 60 * 1000;\r\n      });  \r\n    \r\n      if (!hasFuturePickup) {\r\n        warn('No selected pickup timings available for deletion.');\r\n        return;\r\n      }  \r\n      const formattedDate = `${yearVal}-${String(monthVal + 1).padStart(2, '0')}-${String(dayVal).padStart(2, '0')}`;\r\n    \r\n      setApiProps({\r\n        method: 'DELETE',\r\n        url: `api/employee/pickup-schedule/delete/${employeeId}/${formattedDate}`,\r\n        render: handleDeletePickupApiResponse,\r\n      });\r\n    \r\n    }, [pickupTimings]);\r\n\r\n\r\n  const handleDeleteDropApiResponse = (response) => {\r\n    if (response.status === 200 || response.status === 201) {\r\n      info(response.data.message);\r\n      setEditingDrop(editingDrop)\r\n      setApiProps({\r\n        method: 'GET',\r\n        url: 'api/get/employee-schedules/all',\r\n        render: (response) => {\r\n          if (response.data) {\r\n            setSpocschedules(response.data);\r\n          }\r\n        }\r\n      });\r\n    } else if (response.status === 409) {\r\n      error(response.data.message);\r\n    } else {\r\n      console.error('An unexpected error occurred');\r\n    }\r\n  }\r\n\r\n\r\n  const handleDropDelete = useCallback((employeeId, day) => {\r\n      const dateParts = day.split('/');\r\n      const dayVal = parseInt(dateParts[0], 10);\r\n      const monthVal = parseInt(dateParts[1], 10) - 1; // JS months are 0-based\r\n      const yearVal = parseInt(dateParts[2], 10);\r\n    \r\n      const currentDateTime = new Date();\r\n    \r\n      const hasFutureDrop = dropTimings.some(timing => {\r\n        const [hours, minutes, seconds = '00'] = timing.drop_time.split(':');\r\n        const dropDateTime = new Date(yearVal, monthVal, dayVal, parseInt(hours), parseInt(minutes), parseInt(seconds));  \r\n    \r\n        return dropDateTime - currentDateTime >= 4 * 60 * 60 * 1000;;\r\n      });  \r\n    \r\n      if (!hasFutureDrop) {\r\n        warn('No selected drop timings available for deletion.');\r\n        return;\r\n      }\r\n  \r\n      const formattedDate = `${yearVal}-${String(monthVal + 1).padStart(2, '0')}-${String(dayVal).padStart(2, '0')}`;\r\n    \r\n      setApiProps({\r\n        method: 'DELETE',\r\n        url: `api/employee/drop-schedule/delete/${employeeId}/${formattedDate}`,\r\n        render: handleDeleteDropApiResponse,\r\n      });\r\n    \r\n    }, [dropTimings]);\r\n\r\n\r\n  const handlePickupApiResponse = (response) => {\r\n    if (response.status === 200 || response.status === 201) {\r\n      success(response.data.message);\r\n      setEditingPickup(editingPickup)\r\n      setApiProps({\r\n        method: 'GET',\r\n        url: 'api/get/employee-schedules/all',\r\n        render: (response) => {\r\n          if (response.data) {\r\n            setSpocschedules(response.data);\r\n          }\r\n        }\r\n      });\r\n    } else if (response.status === 409) {\r\n      error(response.data.message);\r\n    } else {\r\n      console.error('An unexpected error occurred');\r\n    }\r\n  };\r\n\r\n  const handlePickupChange = useCallback((event, employeeId, day) => {\r\n    const newDate = new Date(day.split('/').reverse().join('-'));\r\n    const currentDateTime = new Date();\r\n\r\n    const eligiblePickupTimings = pickupTimings.filter(timing => {\r\n      const pickupDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${timing.pickup_time}`);\r\n      return pickupDateTime - currentDateTime >= 6 * 60 * 60 * 1000;\r\n    });\r\n\r\n    const pickup = eligiblePickupTimings[event.target.value]?.pickup_time;\r\n\r\n    if (!pickup) return;\r\n\r\n    const pickupDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${pickup}`);\r\n\r\n    if (pickupDateTime - currentDateTime < 6 * 60 * 60 * 1000) {\r\n      warn('Pickup requests must be made at least 6 hours in advance.');\r\n      setEditingPickup(editingPickup);\r\n      return;\r\n    }\r\n\r\n\r\n    setApiProps({\r\n      method: 'POST',\r\n      url: 'api/create/employee/pickup-schedules',\r\n      postData: {\r\n        employee_id: employeeId,\r\n        shift_date: newDate.toISOString().split('T')[0],\r\n        pickup_time: pickup,\r\n        drop_time: null,\r\n        trip_status: 'Conform',\r\n      },\r\n      render: handlePickupApiResponse,\r\n    });\r\n  }, [pickupTimings]);\r\n\r\n  const handleDropApiResponse = (response) => {\r\n    if (response.status === 200 || response.status === 201) {\r\n      success(response.data.message);\r\n      setEditingDrop(editingDrop)\r\n      setApiProps({\r\n        method: 'GET',\r\n        url: 'api/get/employee-schedules/all',\r\n        render: (response) => {\r\n          if (response.data) {\r\n            setSpocschedules(response.data);\r\n          }\r\n        }\r\n      });\r\n    } else if (response.status === 409) {\r\n      error(response.data.message);\r\n    } else {\r\n      console.error('An unexpected error occurred');\r\n    }\r\n  };\r\n\r\n  const handleDropChange = useCallback((event, employeeId, day) => {\r\n\r\n    const newDate = new Date(day.split('/').reverse().join('-'));\r\n    const currentDateTime = new Date();\r\n\r\n    // Filter eligible drop timings\r\n    const eligibleDropTimings = dropTimings.filter(timing => {\r\n      const dropDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${timing.drop_time}`);\r\n      return dropDateTime - currentDateTime >= 4 * 60 * 60 * 1000;\r\n    });\r\n\r\n    const drop = eligibleDropTimings[event.target.value]?.drop_time;\r\n\r\n    if (!drop) return;\r\n\r\n    const dropDateTime = new Date(`${newDate.toISOString().split('T')[0]}T${drop}`);\r\n\r\n    if (dropDateTime - currentDateTime < 4 * 60 * 60 * 1000) {\r\n      warn('Drop requests must be made at least 4 hours in advance.');\r\n      return;\r\n    }\r\n\r\n    setApiProps({\r\n      method: 'POST',\r\n      url: 'api/create/employee/drop-schedules',\r\n      postData: {\r\n        employee_id: employeeId,\r\n        shift_date: newDate.toISOString().split('T')[0],\r\n        pickup_time: null,\r\n        drop_time: drop,\r\n        trip_status: 'Conform',\r\n      },\r\n      render: handleDropApiResponse,\r\n    });\r\n  }, [dropTimings]);\r\n\r\n  const getEligiblePickupTimings = (day) => {\r\n    const currentDateTime = new Date();\r\n    return pickupTimings.filter(timing => {\r\n      const pickupDateTime = new Date(`${day.split('/').reverse().join('-')}T${timing.pickup_time}`);\r\n      return pickupDateTime - currentDateTime >= 6 * 60 * 60 * 1000;\r\n    });\r\n  };\r\n\r\n  const getEligibleDropTimings = (day) => {\r\n    const currentDateTime = new Date();\r\n    return dropTimings.filter(timing => {\r\n      const dropDateTime = new Date(`${day.split('/').reverse().join('-')}T${timing.drop_time}`);\r\n      return dropDateTime - currentDateTime >= 4 * 60 * 60 * 1000;\r\n    });\r\n  };\r\n\r\n  const isPastDate = (date) => {\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0); // Set the time to midnight\r\n\r\n    const givenDate = new Date(date.split('/').reverse().join('-'));\r\n    givenDate.setHours(0, 0, 0, 0); // Set the time to midnight   \r\n\r\n    return givenDate < today;\r\n  };\r\n\r\n  const isWithinAdvancePeriod = (date) => {\r\n    const today = new Date();\r\n    const givenDate = new Date(date.split('/').reverse().join('-'));\r\n    const advancePeriod = 15 * 24 * 60 * 60 * 1000; // 15 days in milliseconds\r\n    return givenDate - today <= advancePeriod;\r\n  };\r\n\r\n  const isPickupTimeWithinPolicy = (pickupTime, weekDay) => {\r\n    if (!pickupTime || pickupTime === ' -- : --') return true; // Allow if no pickup time\r\n    \r\n    const currentDateTime = new Date();\r\n    const dateParts = weekDay.split('/');\r\n    const pickupDateTime = new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}T${pickupTime}`);\r\n\r\n    // Check if the pickup time is at least 6 hours from now\r\n    const sixHoursInMillis = 6 * 60 * 60 * 1000;\r\n    return (pickupDateTime - currentDateTime) >= sixHoursInMillis;\r\n  };\r\n\r\n  const isDropTimeWithinPolicy = (dropTime, weekDay) => {\r\n    if (!dropTime || dropTime === ' -- : --') return true; // Allow if no pickup time\r\n    \r\n    const currentDateTime = new Date();\r\n    const dateParts = weekDay.split('/');\r\n    const dropDateTime = new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}T${dropTime}`);\r\n\r\n    // Check if the pickup time is at least 6 hours from now\r\n    const fourHoursInMillis = 4 * 60 * 60 * 1000;\r\n    return (dropDateTime - currentDateTime) >= fourHoursInMillis;\r\n  }\r\n\r\n  return (\r\n    <form className='Spoc-main-menu'>\r\n      {apiProps && <ApiComponent {...apiProps} />}\r\n      <div className='action-buttons-container'>\r\n        <WeekRangePicker numberOfWeeks={7} onWeekSelect={handleWeekSelect} />\r\n        <input type=\"text\" placeholder=\"Search...\" className='search-input' onChange={(e)=>setInputValue(e.target.value)} value={inputValue}/>\r\n        {/* <div>\r\n          <Button type='button' className='primary-button' text='Upload' />\r\n        </div> */}\r\n      </div>\r\n     <div className='spoc-infinte-scroll-containers'>\r\n      <InfiniteScroll dataLength={visibleItems.length} pullDownToRefreshThreshold={50} next={() => fetchLazySchedules(spocschedules)} hasMore={hasMore} >\r\n      <div className='spoc-schedules-list'>\r\n        <ul>\r\n          {spocschedules.map((each) => (\r\n            <li key={each.employee_id}>\r\n              <h4>\r\n                <span className='employee-name' onClick={()=> navigate(`/Employee/Details/${each.employee_id}`)}>{each.employee_name}</span> - <span className='employee-id'>{each.employee_id}</span>\r\n              </h4>\r\n              <div className='employee-week-schedule'>\r\n                {weekDays.map((weekDay, index) => {\r\n                  let pickup = ' -- : --';\r\n                  let drop = ' -- : --';\r\n\r\n                  // Ensure correct date format\r\n                  const dateParts = weekDay.split('/');\r\n                  const date = new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}`);\r\n                  const formattedDate = date.toISOString().split('T')[0];\r\n\r\n                  each.schedules.forEach((schedule) => {\r\n                    if (schedule.shift_date === formattedDate) {\r\n                      pickup = schedule.pickup_time ? schedule.pickup_time : ' -- : --';\r\n                      drop = schedule.drop_time ? schedule.drop_time : ' -- : --';\r\n                    }\r\n                  });\r\n\r\n                  const dayName = date.toLocaleDateString('en-US', { weekday: 'short' });\r\n\r\n                  return (\r\n                    <div key={index} className='day-schedule'>\r\n                      <strong>{dayName} ({weekDay})</strong>\r\n                      <div>\r\n                        <label>Pickup:</label>\r\n                        {editingPickup && editingPickup.employeeId === each.employee_id && editingPickup.day === weekDay ? (\r\n                          <select\r\n                            onChange={(event) => handlePickupChange(event, each.employee_id, weekDay)}\r\n                          >\r\n                            <option>Select</option>\r\n                            {editingPickup.eligiblePickupTimings.map((timing, idx) => (\r\n                              <option key={idx} value={idx}>{timing.pickup_time}</option>\r\n                            ))}\r\n                          </select>\r\n                        ) : (\r\n                          <input type=\"text\" value={pickup} readOnly className='time-class' />\r\n                        )}\r\n                        {!isPastDate(weekDay) && isWithinAdvancePeriod(weekDay) && isPickupTimeWithinPolicy(pickup, weekDay) && (\r\n                          <>\r\n                            <MdEdit className='edit-icon' onClick={() => handleEditPickup(each.employee_id, weekDay)} />\r\n                            <MdOutlineDeleteOutline className='delete-icon' onClick={() => handlePickupDelete(each.employee_id, weekDay)} />\r\n                          </>\r\n                        )}\r\n                      </div>\r\n                      <div>\r\n                        <label>Drop:</label>\r\n                        {editingDrop && editingDrop.employeeId === each.employee_id && editingDrop.day === weekDay ? (\r\n                          <select onChange={(event) => handleDropChange(event, each.employee_id, weekDay)}\r\n                          >\r\n                            <option>Select</option>\r\n                            {editingDrop.eligibleDropTimings.map((timing, idx) => (\r\n                              <option key={idx} value={idx}>{timing.drop_time}</option>\r\n                            ))}\r\n                          </select>\r\n                        ) : (\r\n                          <input type=\"text\" value={drop} readOnly className='time-class' />\r\n                        )}\r\n                        {!isPastDate(weekDay) && isWithinAdvancePeriod(weekDay) && isDropTimeWithinPolicy(drop, weekDay) && (\r\n                          <>\r\n                            <MdEdit className='edit-icon' onClick={() => handleEditDrop(each.employee_id, weekDay)} />\r\n                            <MdOutlineDeleteOutline className='delete-icon' onClick={() => handleDropDelete(each.employee_id, weekDay)} />\r\n                          </>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n      </InfiniteScroll>\r\n      </div>\r\n      <Popup isOpen={isPopupOpen} onClose={() => setIsPopupOpen(false)}>\r\n        <div className='operations-bar'>\r\n          <div>\r\n            <input type=\"file\" accept=\".xls,.xlsx,.csv\" onChange={handleFileChange} />\r\n            <Button type=\"button\" text='upload' className='primary-button' onClick={handleUpload}/>\r\n          </div>\r\n          {/* <Button type=\"button\" text='Download' className='primary-button' /> */}\r\n        </div>        \r\n      </Popup>\r\n    </form>\r\n\r\n  );\r\n};\r\n\r\nexport default SPOCSchedules;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC/D,OAAOC,KAAK,MAAM,wBAAwB;AAC1C,OAAOC,MAAM,MAAM,yBAAyB;AAC5C,OAAOC,KAAK,MAAM,wBAAwB;AAC1C,OAAOC,eAAe,MAAM,kCAAkC;AAC9D,OAAOC,cAAc,MAAM,iCAAiC;AAC5D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,OAAO,4CAA4C;AACnD,OAAOC,YAAY,MAAM,sBAAsB;AAC/C,SAASC,MAAM,EAAEC,sBAAsB,QAAQ,gBAAgB;AAC/D,SAASC,SAAS,QAAQ,YAAY;AACtC,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,MAAM,MAAM,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE7C,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAMC,QAAQ,GAAGf,WAAW,CAAC,CAAC;EAC7B,MAAM;IAAEgB,IAAI;IAAEC,IAAI;IAAEC,KAAK;IAAEC;EAAQ,CAAC,GAAGtB,KAAK,CAAC,CAAC;EAC9C,MAAM,CAACuB,WAAW,EAAEC,cAAc,CAAC,GAAG7B,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAAC8B,UAAU,EAAEC,aAAa,CAAC,GAAG/B,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACgC,QAAQ,EAAEC,WAAW,CAAC,GAAGjC,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACkC,aAAa,EAAEC,gBAAgB,CAAC,GAAGnC,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACoC,aAAa,EAAEC,gBAAgB,CAAC,GAAGrC,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACsC,WAAW,EAAEC,cAAc,CAAC,GAAGvC,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACwC,YAAY,EAAEC,eAAe,CAAC,GAAGzC,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAAC0C,QAAQ,EAAEC,WAAW,CAAC,GAAG3C,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAAC4C,WAAW,EAAEC,cAAc,CAAC,GAAG7C,QAAQ,CAAC,CAAC,CAAC,CAAC;EAClD,MAAM,CAAC8C,aAAa,EAAEC,gBAAgB,CAAC,GAAG/C,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAACgD,WAAW,EAAEC,cAAc,CAAC,GAAGjD,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACkD,YAAY,EAAEC,eAAe,CAAC,GAAGnD,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACoD,WAAW,EAAEC,cAAc,CAAC,GAAGrD,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACsD,OAAO,EAAEC,UAAU,CAAC,GAAGvD,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACwD,IAAI,EAAEC,OAAO,CAAC,GAAGzD,QAAQ,CAAC,IAAI,CAAC;EAIxC,MAAM0D,gBAAgB,GAAIC,KAAK,IAAK;IAClC,MAAMH,IAAI,GAAGG,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAClC,IAAIL,IAAI,EAAE;MACRC,OAAO,CAACD,IAAI,CAAC;IACf;EACF,CAAC;EAGD,MAAMM,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAI,CAACN,IAAI,EAAE;MACT9B,KAAK,CAAC,sBAAsB,CAAC;MAC7B;IACF;IACA;IACA,MAAMqC,cAAc,GAAG,CACrB,0BAA0B,EAC1B,mEAAmE,EACnE,UAAU,CACX;IAED,IAAI,CAACA,cAAc,CAACC,QAAQ,CAACR,IAAI,CAACS,IAAI,CAAC,EAAE;MACvCvC,KAAK,CAAC,uDAAuD,CAAC;MAC9D;IACF;IAEA,MAAMwC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEZ,IAAI,CAAC;;IAE7B;IACAvB,WAAW,CAAC;MACVoC,MAAM,EAAE,MAAM;MACdC,GAAG,EAAE,6BAA6B;MAAG;MACrCC,QAAQ,EAAEL,QAAQ;MAClBM,MAAM,EAAGC,QAAQ,IAAK;QACpB5C,cAAc,CAAC,KAAK,CAAC;QACrB6C,cAAc,CAAC,CAAC;QAChB/C,OAAO,CAAC8C,QAAQ,CAACE,IAAI,CAACC,OAAO,IAAI,4BAA4B,CAAC;MAChE,CAAC;MACDC,UAAU,EAAGnD,KAAK,IAAK;QAAA,IAAAoD,eAAA,EAAAC,oBAAA;QACrBrD,KAAK,CAAC,EAAAoD,eAAA,GAAApD,KAAK,CAAC+C,QAAQ,cAAAK,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBH,IAAI,cAAAI,oBAAA,uBAApBA,oBAAA,CAAsBrD,KAAK,KAAI,eAAe,CAAC;MACvD;IACF,CAAC,CAAC;EACJ,CAAC;EAECzB,SAAS,CAAC,MAAM;IACd,MAAM+E,KAAK,GAAGjE,OAAO,CAACkE,GAAG,CAAC,WAAW,CAAC;IACtC,IAAID,KAAK,EAAE;MACT,MAAME,YAAY,GAAGpE,SAAS,CAACkE,KAAK,CAAC;MACrCnC,cAAc,CAACqC,YAAY,CAACC,GAAG,CAAC;IAClC;EACF,CAAC,EAAE,EAAE,CAAC;EAIN,MAAMC,kBAAkB,GAAIC,QAAQ,IAAK;IACvChC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;;IAEtB,MAAMiC,YAAY,GAAGpC,YAAY,CAACqC,MAAM;IACxC,MAAMC,SAAS,GAAGH,QAAQ,CAACI,KAAK,CAACH,YAAY,EAAEA,YAAY,GAAG,EAAE,CAAC;IAEjE,IAAIE,SAAS,CAACD,MAAM,GAAG,CAAC,EAAE;MACxBpC,eAAe,CAACuC,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE,GAAGF,SAAS,CAAC,CAAC;IAClD,CAAC,MAAM;MACLjC,UAAU,CAAC,KAAK,CAAC;IACnB;IACAF,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;EACzB,CAAC;EAGD,MAAMqB,cAAc,GAAGA,CAAA,KAAM;IAC3B,OAAO,IAAIiB,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACtC5D,WAAW,CAAC;QACVoC,MAAM,EAAE,KAAK;QACbC,GAAG,EAAE,gCAAgC;QACrCE,MAAM,EAAGC,QAAQ,IAAK;UACpB,IAAIA,QAAQ,CAACE,IAAI,EAAE;YACjBxC,gBAAgB,CAACsC,QAAQ,CAACE,IAAI,CAAC;YAC/BxB,eAAe,CAAC,EAAE,CAAC;YACnBI,UAAU,CAAC,IAAI,CAAC;YAChB6B,kBAAkB,CAACX,QAAQ,CAACE,IAAI,CAAC;YACjCiB,OAAO,CAACnB,QAAQ,CAACE,IAAI,CAAC;UACxB,CAAC,MAAM;YACLkB,MAAM,CAAC,IAAIC,KAAK,CAAC,0BAA0B,CAAC,CAAC;UAC/C;QACF;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;EAIH7F,SAAS,CAAC,MAAM;IACd;IACA,IAAIiC,aAAa,CAACqD,MAAM,KAAK,CAAC,EAAE;MAC9Bb,cAAc,CAAC,CAAC;IAClB;IACA,IAAItC,aAAa,CAACmD,MAAM,KAAK,CAAC,EAAE;MAC9BtD,WAAW,CAAC;QACVoC,MAAM,EAAE,KAAK;QACbC,GAAG,EAAE,8CAA8C;QACnDE,MAAM,EAAGC,QAAQ,IAAK;UACpB,IAAIA,QAAQ,CAACE,IAAI,EAAE;YACjBtC,gBAAgB,CAACoC,QAAQ,CAACE,IAAI,CAAC;UACjC;QACF;MACF,CAAC,CAAC;IACJ;IACA,IAAIrC,WAAW,CAACiD,MAAM,KAAK,CAAC,EAAE;MAC5BtD,WAAW,CAAC;QACVoC,MAAM,EAAE,KAAK;QACbC,GAAG,EAAE,4CAA4C;QACjDE,MAAM,EAAGC,QAAQ,IAAK;UACpB,IAAIA,QAAQ,CAACE,IAAI,EAAE;YACjBpC,cAAc,CAACkC,QAAQ,CAACE,IAAI,CAAC;UAC/B;QACF;MACF,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAACzC,aAAa,EAAEE,aAAa,EAAEE,WAAW,CAAC,CAAC;EAE/C,MAAMyD,gBAAgB,GAAIC,SAAS,IAAK;IACtCvD,eAAe,CAACuD,SAAS,CAAC;IAC1B,MAAM,CAACC,KAAK,EAAEC,GAAG,CAAC,GAAGF,SAAS,CAACG,KAAK,CAAC,KAAK,CAAC;IAC3C,MAAMC,SAAS,GAAG,IAAIC,IAAI,CAACJ,KAAK,CAACE,KAAK,CAAC,GAAG,CAAC,CAACG,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAClE,MAAMC,IAAI,GAAG,EAAE;IACf,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC1B,MAAMC,GAAG,GAAG,IAAIL,IAAI,CAACD,SAAS,CAAC;MAC/BM,GAAG,CAACC,OAAO,CAACD,GAAG,CAACE,OAAO,CAAC,CAAC,GAAGH,CAAC,CAAC;MAC9BD,IAAI,CAACK,IAAI,CAACH,GAAG,CAACI,kBAAkB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC9C;IACAnE,WAAW,CAAC6D,IAAI,CAAC;EACnB,CAAC;EAED,MAAMO,gBAAgB,GAAGA,CAACC,UAAU,EAAEN,GAAG,KAAK;IAC5C,MAAMO,qBAAqB,GAAGC,wBAAwB,CAACR,GAAG,CAAC;IAC3D,IAAIO,qBAAqB,CAAC1B,MAAM,KAAK,CAAC,EAAE;MACtC/D,IAAI,CAAC,uCAAuC,CAAC;MAC7C;IACF;IACAuB,gBAAgB,CAAC;MAAEiE,UAAU;MAAEN,GAAG;MAAEO,qBAAqB;MAAEE,iBAAiB,EAAE;IAAE,CAAC,CAAC;EACpF,CAAC;EAED,MAAMC,cAAc,GAAGA,CAACJ,UAAU,EAAEN,GAAG,KAAK;IAC1C,MAAMW,mBAAmB,GAAGC,sBAAsB,CAACZ,GAAG,CAAC;IACvD,IAAIW,mBAAmB,CAAC9B,MAAM,KAAK,CAAC,EAAE;MACpC/D,IAAI,CAAC,qCAAqC,CAAC;MAC3C;IACF;IACAyB,cAAc,CAAC;MAAE+D,UAAU;MAAEN,GAAG;MAAEW,mBAAmB;MAAEE,eAAe,EAAE;IAAE,CAAC,CAAC;EAC9E,CAAC;EAED,MAAMC,6BAA6B,GAAI/C,QAAQ,IAAK;IAClD,IAAIA,QAAQ,CAACgD,MAAM,KAAK,GAAG,IAAIhD,QAAQ,CAACgD,MAAM,KAAK,GAAG,EAAE;MACtDhG,IAAI,CAACgD,QAAQ,CAACE,IAAI,CAACC,OAAO,CAAC;MAC3B7B,gBAAgB,CAACD,aAAa,CAAC;MAC/Bb,WAAW,CAAC;QACVoC,MAAM,EAAE,KAAK;QACbC,GAAG,EAAE,gCAAgC;QACrCE,MAAM,EAAGC,QAAQ,IAAK;UACpB,IAAIA,QAAQ,CAACE,IAAI,EAAE;YACjBxC,gBAAgB,CAACsC,QAAQ,CAACE,IAAI,CAAC;UACjC;QACF;MACF,CAAC,CAAC;IACJ,CAAC,MAAM,IAAIF,QAAQ,CAACgD,MAAM,KAAK,GAAG,EAAE;MAClC/F,KAAK,CAAC+C,QAAQ,CAACE,IAAI,CAACC,OAAO,CAAC;IAC9B,CAAC,MAAM;MACL8C,OAAO,CAAChG,KAAK,CAAC,8BAA8B,CAAC;IAC/C;EACF,CAAC;EAED,MAAMiG,kBAAkB,GAAGzH,WAAW,CAAC,CAAC8G,UAAU,EAAEN,GAAG,KAAK;IACxD,MAAMkB,SAAS,GAAGlB,GAAG,CAACP,KAAK,CAAC,GAAG,CAAC;IAChC,MAAM0B,MAAM,GAAGC,QAAQ,CAACF,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;IACzC,MAAMG,QAAQ,GAAGD,QAAQ,CAACF,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;IACjD,MAAMI,OAAO,GAAGF,QAAQ,CAACF,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;IAE1C,MAAMK,eAAe,GAAG,IAAI5B,IAAI,CAAC,CAAC;IAElC,MAAM6B,eAAe,GAAG9F,aAAa,CAAC+F,IAAI,CAACC,MAAM,IAAI;MACnD,MAAM,CAACC,KAAK,EAAEC,OAAO,EAAEC,OAAO,GAAG,IAAI,CAAC,GAAGH,MAAM,CAACI,WAAW,CAACrC,KAAK,CAAC,GAAG,CAAC;MACtE,MAAMsC,cAAc,GAAG,IAAIpC,IAAI,CAC7B2B,OAAO,EACPD,QAAQ,EACRF,MAAM,EACNC,QAAQ,CAACO,KAAK,EAAE,EAAE,CAAC,EACnBP,QAAQ,CAACQ,OAAO,EAAE,EAAE,CAAC,EACrBR,QAAQ,CAACS,OAAO,EAAE,EAAE,CACtB,CAAC;MAED,OAAOE,cAAc,GAAGR,eAAe,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;IAC/D,CAAC,CAAC;IAEF,IAAI,CAACC,eAAe,EAAE;MACpB1G,IAAI,CAAC,oDAAoD,CAAC;MAC1D;IACF;IACA,MAAMkH,aAAa,GAAG,GAAGV,OAAO,IAAIW,MAAM,CAACZ,QAAQ,GAAG,CAAC,CAAC,CAACa,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAID,MAAM,CAACd,MAAM,CAAC,CAACe,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;IAE9G3G,WAAW,CAAC;MACVoC,MAAM,EAAE,QAAQ;MAChBC,GAAG,EAAE,uCAAuC0C,UAAU,IAAI0B,aAAa,EAAE;MACzElE,MAAM,EAAEgD;IACV,CAAC,CAAC;EAEJ,CAAC,EAAE,CAACpF,aAAa,CAAC,CAAC;EAGrB,MAAMyG,2BAA2B,GAAIpE,QAAQ,IAAK;IAChD,IAAIA,QAAQ,CAACgD,MAAM,KAAK,GAAG,IAAIhD,QAAQ,CAACgD,MAAM,KAAK,GAAG,EAAE;MACtDhG,IAAI,CAACgD,QAAQ,CAACE,IAAI,CAACC,OAAO,CAAC;MAC3B3B,cAAc,CAACD,WAAW,CAAC;MAC3Bf,WAAW,CAAC;QACVoC,MAAM,EAAE,KAAK;QACbC,GAAG,EAAE,gCAAgC;QACrCE,MAAM,EAAGC,QAAQ,IAAK;UACpB,IAAIA,QAAQ,CAACE,IAAI,EAAE;YACjBxC,gBAAgB,CAACsC,QAAQ,CAACE,IAAI,CAAC;UACjC;QACF;MACF,CAAC,CAAC;IACJ,CAAC,MAAM,IAAIF,QAAQ,CAACgD,MAAM,KAAK,GAAG,EAAE;MAClC/F,KAAK,CAAC+C,QAAQ,CAACE,IAAI,CAACC,OAAO,CAAC;IAC9B,CAAC,MAAM;MACL8C,OAAO,CAAChG,KAAK,CAAC,8BAA8B,CAAC;IAC/C;EACF,CAAC;EAGD,MAAMoH,gBAAgB,GAAG5I,WAAW,CAAC,CAAC8G,UAAU,EAAEN,GAAG,KAAK;IACtD,MAAMkB,SAAS,GAAGlB,GAAG,CAACP,KAAK,CAAC,GAAG,CAAC;IAChC,MAAM0B,MAAM,GAAGC,QAAQ,CAACF,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;IACzC,MAAMG,QAAQ,GAAGD,QAAQ,CAACF,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;IACjD,MAAMI,OAAO,GAAGF,QAAQ,CAACF,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;IAE1C,MAAMK,eAAe,GAAG,IAAI5B,IAAI,CAAC,CAAC;IAElC,MAAM0C,aAAa,GAAGzG,WAAW,CAAC6F,IAAI,CAACC,MAAM,IAAI;MAC/C,MAAM,CAACC,KAAK,EAAEC,OAAO,EAAEC,OAAO,GAAG,IAAI,CAAC,GAAGH,MAAM,CAACY,SAAS,CAAC7C,KAAK,CAAC,GAAG,CAAC;MACpE,MAAM8C,YAAY,GAAG,IAAI5C,IAAI,CAAC2B,OAAO,EAAED,QAAQ,EAAEF,MAAM,EAAEC,QAAQ,CAACO,KAAK,CAAC,EAAEP,QAAQ,CAACQ,OAAO,CAAC,EAAER,QAAQ,CAACS,OAAO,CAAC,CAAC;MAE/G,OAAOU,YAAY,GAAGhB,eAAe,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;MAAC;IAC9D,CAAC,CAAC;IAEF,IAAI,CAACc,aAAa,EAAE;MAClBvH,IAAI,CAAC,kDAAkD,CAAC;MACxD;IACF;IAEA,MAAMkH,aAAa,GAAG,GAAGV,OAAO,IAAIW,MAAM,CAACZ,QAAQ,GAAG,CAAC,CAAC,CAACa,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAID,MAAM,CAACd,MAAM,CAAC,CAACe,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;IAE9G3G,WAAW,CAAC;MACVoC,MAAM,EAAE,QAAQ;MAChBC,GAAG,EAAE,qCAAqC0C,UAAU,IAAI0B,aAAa,EAAE;MACvElE,MAAM,EAAEqE;IACV,CAAC,CAAC;EAEJ,CAAC,EAAE,CAACvG,WAAW,CAAC,CAAC;EAGnB,MAAM4G,uBAAuB,GAAIzE,QAAQ,IAAK;IAC5C,IAAIA,QAAQ,CAACgD,MAAM,KAAK,GAAG,IAAIhD,QAAQ,CAACgD,MAAM,KAAK,GAAG,EAAE;MACtD9F,OAAO,CAAC8C,QAAQ,CAACE,IAAI,CAACC,OAAO,CAAC;MAC9B7B,gBAAgB,CAACD,aAAa,CAAC;MAC/Bb,WAAW,CAAC;QACVoC,MAAM,EAAE,KAAK;QACbC,GAAG,EAAE,gCAAgC;QACrCE,MAAM,EAAGC,QAAQ,IAAK;UACpB,IAAIA,QAAQ,CAACE,IAAI,EAAE;YACjBxC,gBAAgB,CAACsC,QAAQ,CAACE,IAAI,CAAC;UACjC;QACF;MACF,CAAC,CAAC;IACJ,CAAC,MAAM,IAAIF,QAAQ,CAACgD,MAAM,KAAK,GAAG,EAAE;MAClC/F,KAAK,CAAC+C,QAAQ,CAACE,IAAI,CAACC,OAAO,CAAC;IAC9B,CAAC,MAAM;MACL8C,OAAO,CAAChG,KAAK,CAAC,8BAA8B,CAAC;IAC/C;EACF,CAAC;EAED,MAAMyH,kBAAkB,GAAGjJ,WAAW,CAAC,CAACyD,KAAK,EAAEqD,UAAU,EAAEN,GAAG,KAAK;IAAA,IAAA0C,qBAAA;IACjE,MAAMC,OAAO,GAAG,IAAIhD,IAAI,CAACK,GAAG,CAACP,KAAK,CAAC,GAAG,CAAC,CAACG,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC5D,MAAM0B,eAAe,GAAG,IAAI5B,IAAI,CAAC,CAAC;IAElC,MAAMY,qBAAqB,GAAG7E,aAAa,CAACkH,MAAM,CAAClB,MAAM,IAAI;MAC3D,MAAMK,cAAc,GAAG,IAAIpC,IAAI,CAAC,GAAGgD,OAAO,CAACE,WAAW,CAAC,CAAC,CAACpD,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAIiC,MAAM,CAACI,WAAW,EAAE,CAAC;MAC/F,OAAOC,cAAc,GAAGR,eAAe,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;IAC/D,CAAC,CAAC;IAEF,MAAMuB,MAAM,IAAAJ,qBAAA,GAAGnC,qBAAqB,CAACtD,KAAK,CAACC,MAAM,CAAC6F,KAAK,CAAC,cAAAL,qBAAA,uBAAzCA,qBAAA,CAA2CZ,WAAW;IAErE,IAAI,CAACgB,MAAM,EAAE;IAEb,MAAMf,cAAc,GAAG,IAAIpC,IAAI,CAAC,GAAGgD,OAAO,CAACE,WAAW,CAAC,CAAC,CAACpD,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAIqD,MAAM,EAAE,CAAC;IAEnF,IAAIf,cAAc,GAAGR,eAAe,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,EAAE;MACzDzG,IAAI,CAAC,2DAA2D,CAAC;MACjEuB,gBAAgB,CAACD,aAAa,CAAC;MAC/B;IACF;IAGAb,WAAW,CAAC;MACVoC,MAAM,EAAE,MAAM;MACdC,GAAG,EAAE,sCAAsC;MAC3CC,QAAQ,EAAE;QACRmF,WAAW,EAAE1C,UAAU;QACvB2C,UAAU,EAAEN,OAAO,CAACE,WAAW,CAAC,CAAC,CAACpD,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAC/CqC,WAAW,EAAEgB,MAAM;QACnBR,SAAS,EAAE,IAAI;QACfY,WAAW,EAAE;MACf,CAAC;MACDpF,MAAM,EAAE0E;IACV,CAAC,CAAC;EACJ,CAAC,EAAE,CAAC9G,aAAa,CAAC,CAAC;EAEnB,MAAMyH,qBAAqB,GAAIpF,QAAQ,IAAK;IAC1C,IAAIA,QAAQ,CAACgD,MAAM,KAAK,GAAG,IAAIhD,QAAQ,CAACgD,MAAM,KAAK,GAAG,EAAE;MACtD9F,OAAO,CAAC8C,QAAQ,CAACE,IAAI,CAACC,OAAO,CAAC;MAC9B3B,cAAc,CAACD,WAAW,CAAC;MAC3Bf,WAAW,CAAC;QACVoC,MAAM,EAAE,KAAK;QACbC,GAAG,EAAE,gCAAgC;QACrCE,MAAM,EAAGC,QAAQ,IAAK;UACpB,IAAIA,QAAQ,CAACE,IAAI,EAAE;YACjBxC,gBAAgB,CAACsC,QAAQ,CAACE,IAAI,CAAC;UACjC;QACF;MACF,CAAC,CAAC;IACJ,CAAC,MAAM,IAAIF,QAAQ,CAACgD,MAAM,KAAK,GAAG,EAAE;MAClC/F,KAAK,CAAC+C,QAAQ,CAACE,IAAI,CAACC,OAAO,CAAC;IAC9B,CAAC,MAAM;MACL8C,OAAO,CAAChG,KAAK,CAAC,8BAA8B,CAAC;IAC/C;EACF,CAAC;EAED,MAAMoI,gBAAgB,GAAG5J,WAAW,CAAC,CAACyD,KAAK,EAAEqD,UAAU,EAAEN,GAAG,KAAK;IAAA,IAAAqD,qBAAA;IAE/D,MAAMV,OAAO,GAAG,IAAIhD,IAAI,CAACK,GAAG,CAACP,KAAK,CAAC,GAAG,CAAC,CAACG,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC5D,MAAM0B,eAAe,GAAG,IAAI5B,IAAI,CAAC,CAAC;;IAElC;IACA,MAAMgB,mBAAmB,GAAG/E,WAAW,CAACgH,MAAM,CAAClB,MAAM,IAAI;MACvD,MAAMa,YAAY,GAAG,IAAI5C,IAAI,CAAC,GAAGgD,OAAO,CAACE,WAAW,CAAC,CAAC,CAACpD,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAIiC,MAAM,CAACY,SAAS,EAAE,CAAC;MAC3F,OAAOC,YAAY,GAAGhB,eAAe,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;IAC7D,CAAC,CAAC;IAEF,MAAM+B,IAAI,IAAAD,qBAAA,GAAG1C,mBAAmB,CAAC1D,KAAK,CAACC,MAAM,CAAC6F,KAAK,CAAC,cAAAM,qBAAA,uBAAvCA,qBAAA,CAAyCf,SAAS;IAE/D,IAAI,CAACgB,IAAI,EAAE;IAEX,MAAMf,YAAY,GAAG,IAAI5C,IAAI,CAAC,GAAGgD,OAAO,CAACE,WAAW,CAAC,CAAC,CAACpD,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI6D,IAAI,EAAE,CAAC;IAE/E,IAAIf,YAAY,GAAGhB,eAAe,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,EAAE;MACvDzG,IAAI,CAAC,yDAAyD,CAAC;MAC/D;IACF;IAEAS,WAAW,CAAC;MACVoC,MAAM,EAAE,MAAM;MACdC,GAAG,EAAE,oCAAoC;MACzCC,QAAQ,EAAE;QACRmF,WAAW,EAAE1C,UAAU;QACvB2C,UAAU,EAAEN,OAAO,CAACE,WAAW,CAAC,CAAC,CAACpD,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAC/CqC,WAAW,EAAE,IAAI;QACjBQ,SAAS,EAAEgB,IAAI;QACfJ,WAAW,EAAE;MACf,CAAC;MACDpF,MAAM,EAAEqF;IACV,CAAC,CAAC;EACJ,CAAC,EAAE,CAACvH,WAAW,CAAC,CAAC;EAEjB,MAAM4E,wBAAwB,GAAIR,GAAG,IAAK;IACxC,MAAMuB,eAAe,GAAG,IAAI5B,IAAI,CAAC,CAAC;IAClC,OAAOjE,aAAa,CAACkH,MAAM,CAAClB,MAAM,IAAI;MACpC,MAAMK,cAAc,GAAG,IAAIpC,IAAI,CAAC,GAAGK,GAAG,CAACP,KAAK,CAAC,GAAG,CAAC,CAACG,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC,IAAI6B,MAAM,CAACI,WAAW,EAAE,CAAC;MAC9F,OAAOC,cAAc,GAAGR,eAAe,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;IAC/D,CAAC,CAAC;EACJ,CAAC;EAED,MAAMX,sBAAsB,GAAIZ,GAAG,IAAK;IACtC,MAAMuB,eAAe,GAAG,IAAI5B,IAAI,CAAC,CAAC;IAClC,OAAO/D,WAAW,CAACgH,MAAM,CAAClB,MAAM,IAAI;MAClC,MAAMa,YAAY,GAAG,IAAI5C,IAAI,CAAC,GAAGK,GAAG,CAACP,KAAK,CAAC,GAAG,CAAC,CAACG,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC,IAAI6B,MAAM,CAACY,SAAS,EAAE,CAAC;MAC1F,OAAOC,YAAY,GAAGhB,eAAe,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;IAC7D,CAAC,CAAC;EACJ,CAAC;EAED,MAAMgC,UAAU,GAAIC,IAAI,IAAK;IAC3B,MAAMC,KAAK,GAAG,IAAI9D,IAAI,CAAC,CAAC;IACxB8D,KAAK,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;;IAE5B,MAAMC,SAAS,GAAG,IAAIhE,IAAI,CAAC6D,IAAI,CAAC/D,KAAK,CAAC,GAAG,CAAC,CAACG,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC/D8D,SAAS,CAACD,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;;IAEhC,OAAOC,SAAS,GAAGF,KAAK;EAC1B,CAAC;EAED,MAAMG,qBAAqB,GAAIJ,IAAI,IAAK;IACtC,MAAMC,KAAK,GAAG,IAAI9D,IAAI,CAAC,CAAC;IACxB,MAAMgE,SAAS,GAAG,IAAIhE,IAAI,CAAC6D,IAAI,CAAC/D,KAAK,CAAC,GAAG,CAAC,CAACG,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC/D,MAAMgE,aAAa,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;IAChD,OAAOF,SAAS,GAAGF,KAAK,IAAII,aAAa;EAC3C,CAAC;EAED,MAAMC,wBAAwB,GAAGA,CAACC,UAAU,EAAEC,OAAO,KAAK;IACxD,IAAI,CAACD,UAAU,IAAIA,UAAU,KAAK,UAAU,EAAE,OAAO,IAAI,CAAC,CAAC;;IAE3D,MAAMxC,eAAe,GAAG,IAAI5B,IAAI,CAAC,CAAC;IAClC,MAAMuB,SAAS,GAAG8C,OAAO,CAACvE,KAAK,CAAC,GAAG,CAAC;IACpC,MAAMsC,cAAc,GAAG,IAAIpC,IAAI,CAAC,GAAGuB,SAAS,CAAC,CAAC,CAAC,IAAIA,SAAS,CAAC,CAAC,CAAC,IAAIA,SAAS,CAAC,CAAC,CAAC,IAAI6C,UAAU,EAAE,CAAC;;IAEhG;IACA,MAAME,gBAAgB,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;IAC3C,OAAQlC,cAAc,GAAGR,eAAe,IAAK0C,gBAAgB;EAC/D,CAAC;EAED,MAAMC,sBAAsB,GAAGA,CAACC,QAAQ,EAAEH,OAAO,KAAK;IACpD,IAAI,CAACG,QAAQ,IAAIA,QAAQ,KAAK,UAAU,EAAE,OAAO,IAAI,CAAC,CAAC;;IAEvD,MAAM5C,eAAe,GAAG,IAAI5B,IAAI,CAAC,CAAC;IAClC,MAAMuB,SAAS,GAAG8C,OAAO,CAACvE,KAAK,CAAC,GAAG,CAAC;IACpC,MAAM8C,YAAY,GAAG,IAAI5C,IAAI,CAAC,GAAGuB,SAAS,CAAC,CAAC,CAAC,IAAIA,SAAS,CAAC,CAAC,CAAC,IAAIA,SAAS,CAAC,CAAC,CAAC,IAAIiD,QAAQ,EAAE,CAAC;;IAE5F;IACA,MAAMC,iBAAiB,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;IAC5C,OAAQ7B,YAAY,GAAGhB,eAAe,IAAK6C,iBAAiB;EAC9D,CAAC;EAED,oBACE5J,OAAA;IAAM6J,SAAS,EAAC,gBAAgB;IAAAC,QAAA,GAC7BhJ,QAAQ,iBAAId,OAAA,CAACP,YAAY;MAAA,GAAKqB;IAAQ;MAAAiJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,eAC3ClK,OAAA;MAAK6J,SAAS,EAAC,0BAA0B;MAAAC,QAAA,gBACvC9J,OAAA,CAACZ,eAAe;QAAC+K,aAAa,EAAE,CAAE;QAACC,YAAY,EAAEvF;MAAiB;QAAAkF,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACrElK,OAAA;QAAO+C,IAAI,EAAC,MAAM;QAACsH,WAAW,EAAC,WAAW;QAACR,SAAS,EAAC,cAAc;QAACS,QAAQ,EAAGC,CAAC,IAAG1J,aAAa,CAAC0J,CAAC,CAAC7H,MAAM,CAAC6F,KAAK,CAAE;QAACA,KAAK,EAAE3H;MAAW;QAAAmJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAInI,CAAC,eACPlK,OAAA;MAAK6J,SAAS,EAAC,gCAAgC;MAAAC,QAAA,eAC9C9J,OAAA,CAACX,cAAc;QAACmL,UAAU,EAAExI,YAAY,CAACqC,MAAO;QAACoG,0BAA0B,EAAE,EAAG;QAACC,IAAI,EAAEA,CAAA,KAAMxG,kBAAkB,CAAClD,aAAa,CAAE;QAACoB,OAAO,EAAEA,OAAQ;QAAA0H,QAAA,eACjJ9J,OAAA;UAAK6J,SAAS,EAAC,qBAAqB;UAAAC,QAAA,eAClC9J,OAAA;YAAA8J,QAAA,EACG9I,aAAa,CAAC2J,GAAG,CAAEC,IAAI,iBACtB5K,OAAA;cAAA8J,QAAA,gBACE9J,OAAA;gBAAA8J,QAAA,gBACE9J,OAAA;kBAAM6J,SAAS,EAAC,eAAe;kBAACgB,OAAO,EAAEA,CAAA,KAAKxK,QAAQ,CAAC,qBAAqBuK,IAAI,CAACpC,WAAW,EAAE,CAAE;kBAAAsB,QAAA,EAAEc,IAAI,CAACE;gBAAa;kBAAAf,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,OAAG,eAAAlK,OAAA;kBAAM6J,SAAS,EAAC,aAAa;kBAAAC,QAAA,EAAEc,IAAI,CAACpC;gBAAW;kBAAAuB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACpL,CAAC,eACLlK,OAAA;gBAAK6J,SAAS,EAAC,wBAAwB;gBAAAC,QAAA,EACpCtI,QAAQ,CAACmJ,GAAG,CAAC,CAACnB,OAAO,EAAEuB,KAAK,KAAK;kBAChC,IAAIzC,MAAM,GAAG,UAAU;kBACvB,IAAIQ,IAAI,GAAG,UAAU;;kBAErB;kBACA,MAAMpC,SAAS,GAAG8C,OAAO,CAACvE,KAAK,CAAC,GAAG,CAAC;kBACpC,MAAM+D,IAAI,GAAG,IAAI7D,IAAI,CAAC,GAAGuB,SAAS,CAAC,CAAC,CAAC,IAAIA,SAAS,CAAC,CAAC,CAAC,IAAIA,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC;kBACxE,MAAMc,aAAa,GAAGwB,IAAI,CAACX,WAAW,CAAC,CAAC,CAACpD,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;kBAEtD2F,IAAI,CAACI,SAAS,CAACC,OAAO,CAAEC,QAAQ,IAAK;oBACnC,IAAIA,QAAQ,CAACzC,UAAU,KAAKjB,aAAa,EAAE;sBACzCc,MAAM,GAAG4C,QAAQ,CAAC5D,WAAW,GAAG4D,QAAQ,CAAC5D,WAAW,GAAG,UAAU;sBACjEwB,IAAI,GAAGoC,QAAQ,CAACpD,SAAS,GAAGoD,QAAQ,CAACpD,SAAS,GAAG,UAAU;oBAC7D;kBACF,CAAC,CAAC;kBAEF,MAAMqD,OAAO,GAAGnC,IAAI,CAACpD,kBAAkB,CAAC,OAAO,EAAE;oBAAEwF,OAAO,EAAE;kBAAQ,CAAC,CAAC;kBAEtE,oBACEpL,OAAA;oBAAiB6J,SAAS,EAAC,cAAc;oBAAAC,QAAA,gBACvC9J,OAAA;sBAAA8J,QAAA,GAASqB,OAAO,EAAC,IAAE,EAAC3B,OAAO,EAAC,GAAC;oBAAA;sBAAAO,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eACtClK,OAAA;sBAAA8J,QAAA,gBACE9J,OAAA;wBAAA8J,QAAA,EAAO;sBAAO;wBAAAC,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAO,CAAC,EACrBtI,aAAa,IAAIA,aAAa,CAACkE,UAAU,KAAK8E,IAAI,CAACpC,WAAW,IAAI5G,aAAa,CAAC4D,GAAG,KAAKgE,OAAO,gBAC9FxJ,OAAA;wBACEsK,QAAQ,EAAG7H,KAAK,IAAKwF,kBAAkB,CAACxF,KAAK,EAAEmI,IAAI,CAACpC,WAAW,EAAEgB,OAAO,CAAE;wBAAAM,QAAA,gBAE1E9J,OAAA;0BAAA8J,QAAA,EAAQ;wBAAM;0BAAAC,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAQ,CAAC,EACtBtI,aAAa,CAACmE,qBAAqB,CAAC4E,GAAG,CAAC,CAACzD,MAAM,EAAEmE,GAAG,kBACnDrL,OAAA;0BAAkBuI,KAAK,EAAE8C,GAAI;0BAAAvB,QAAA,EAAE5C,MAAM,CAACI;wBAAW,GAApC+D,GAAG;0BAAAtB,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAA0C,CAC3D,CAAC;sBAAA;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACI,CAAC,gBAETlK,OAAA;wBAAO+C,IAAI,EAAC,MAAM;wBAACwF,KAAK,EAAED,MAAO;wBAACgD,QAAQ;wBAACzB,SAAS,EAAC;sBAAY;wBAAAE,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE,CACpE,EACA,CAACnB,UAAU,CAACS,OAAO,CAAC,IAAIJ,qBAAqB,CAACI,OAAO,CAAC,IAAIF,wBAAwB,CAAChB,MAAM,EAAEkB,OAAO,CAAC,iBAClGxJ,OAAA,CAAAE,SAAA;wBAAA4J,QAAA,gBACE9J,OAAA,CAACN,MAAM;0BAACmK,SAAS,EAAC,WAAW;0BAACgB,OAAO,EAAEA,CAAA,KAAMhF,gBAAgB,CAAC+E,IAAI,CAACpC,WAAW,EAAEgB,OAAO;wBAAE;0BAAAO,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAE,CAAC,eAC5FlK,OAAA,CAACL,sBAAsB;0BAACkK,SAAS,EAAC,aAAa;0BAACgB,OAAO,EAAEA,CAAA,KAAMpE,kBAAkB,CAACmE,IAAI,CAACpC,WAAW,EAAEgB,OAAO;wBAAE;0BAAAO,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAE,CAAC;sBAAA,eAChH,CACH;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACE,CAAC,eACNlK,OAAA;sBAAA8J,QAAA,gBACE9J,OAAA;wBAAA8J,QAAA,EAAO;sBAAK;wBAAAC,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAO,CAAC,EACnBpI,WAAW,IAAIA,WAAW,CAACgE,UAAU,KAAK8E,IAAI,CAACpC,WAAW,IAAI1G,WAAW,CAAC0D,GAAG,KAAKgE,OAAO,gBACxFxJ,OAAA;wBAAQsK,QAAQ,EAAG7H,KAAK,IAAKmG,gBAAgB,CAACnG,KAAK,EAAEmI,IAAI,CAACpC,WAAW,EAAEgB,OAAO,CAAE;wBAAAM,QAAA,gBAE9E9J,OAAA;0BAAA8J,QAAA,EAAQ;wBAAM;0BAAAC,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAQ,CAAC,EACtBpI,WAAW,CAACqE,mBAAmB,CAACwE,GAAG,CAAC,CAACzD,MAAM,EAAEmE,GAAG,kBAC/CrL,OAAA;0BAAkBuI,KAAK,EAAE8C,GAAI;0BAAAvB,QAAA,EAAE5C,MAAM,CAACY;wBAAS,GAAlCuD,GAAG;0BAAAtB,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAwC,CACzD,CAAC;sBAAA;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACI,CAAC,gBAETlK,OAAA;wBAAO+C,IAAI,EAAC,MAAM;wBAACwF,KAAK,EAAEO,IAAK;wBAACwC,QAAQ;wBAACzB,SAAS,EAAC;sBAAY;wBAAAE,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE,CAClE,EACA,CAACnB,UAAU,CAACS,OAAO,CAAC,IAAIJ,qBAAqB,CAACI,OAAO,CAAC,IAAIE,sBAAsB,CAACZ,IAAI,EAAEU,OAAO,CAAC,iBAC9FxJ,OAAA,CAAAE,SAAA;wBAAA4J,QAAA,gBACE9J,OAAA,CAACN,MAAM;0BAACmK,SAAS,EAAC,WAAW;0BAACgB,OAAO,EAAEA,CAAA,KAAM3E,cAAc,CAAC0E,IAAI,CAACpC,WAAW,EAAEgB,OAAO;wBAAE;0BAAAO,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAE,CAAC,eAC1FlK,OAAA,CAACL,sBAAsB;0BAACkK,SAAS,EAAC,aAAa;0BAACgB,OAAO,EAAEA,CAAA,KAAMjD,gBAAgB,CAACgD,IAAI,CAACpC,WAAW,EAAEgB,OAAO;wBAAE;0BAAAO,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAE,CAAC;sBAAA,eAC9G,CACH;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACE,CAAC;kBAAA,GA1CEa,KAAK;oBAAAhB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OA2CV,CAAC;gBAEV,CAAC;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC;YAAA,GAtECU,IAAI,CAACpC,WAAW;cAAAuB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAuErB,CACL;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACU;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACZ,CAAC,eACNlK,OAAA,CAACf,KAAK;MAACsM,MAAM,EAAE7K,WAAY;MAAC8K,OAAO,EAAEA,CAAA,KAAM7K,cAAc,CAAC,KAAK,CAAE;MAAAmJ,QAAA,eAC/D9J,OAAA;QAAK6J,SAAS,EAAC,gBAAgB;QAAAC,QAAA,eAC7B9J,OAAA;UAAA8J,QAAA,gBACE9J,OAAA;YAAO+C,IAAI,EAAC,MAAM;YAAC0I,MAAM,EAAC,iBAAiB;YAACnB,QAAQ,EAAE9H;UAAiB;YAAAuH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC1ElK,OAAA,CAACd,MAAM;YAAC6D,IAAI,EAAC,QAAQ;YAAC2I,IAAI,EAAC,QAAQ;YAAC7B,SAAS,EAAC,gBAAgB;YAACgB,OAAO,EAAEjI;UAAa;YAAAmH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpF;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAEH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAGX,CAAC;AAAC9J,EAAA,CA1iBID,aAAa;EAAA,QACDb,WAAW;AAAA;AAAAqM,EAAA,GADvBxL,aAAa;AA4iBnB,eAAeA,aAAa;AAAC,IAAAwL,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}